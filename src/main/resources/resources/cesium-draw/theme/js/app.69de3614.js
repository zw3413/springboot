(function(e){function t(t){for(var r,o,s=t[0],l=t[1],c=t[2],h=0,u=[];h<s.length;h++)o=s[h],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&u.push(n[o][0]),n[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(u.length)u.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],r=!0,s=1;s<i.length;s++){var l=i[s];0!==n[l]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=i[0]))}return e}var r={},n={app:0},a=[];function o(t){if(r[t])return r[t].exports;var i=r[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=r,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(i,r,function(t){return e[t]}.bind(null,r));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=l;a.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"12a4":function(e,t,i){"use strict";i("dc63")},1890:function(e,t,i){"use strict";i("f155")},"24fd":function(e,t,i){"use strict";i("cc5e")},"2b56":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("1bc7"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("9f60"),core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("94f0"),core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("0c84"),core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("2843"),core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("4057"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("a450"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("fc02"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("aa18"),core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("982e"),core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_9__),_core_GraphicManager__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("4e00"),_components_markerViewer__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("2c79"),_core_Graphic__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("cd53"),_layerManager__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("5eae"),_core_GraphicType__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("4ab0"),shapefile__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("6667"),_js_utils__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("9944"),jquery__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("a336"),jquery__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_17__);function _createForOfIteratorHelper(e,t){var i;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=_unsupportedIterableToArray(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"===typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var graphicManager=void 0,Cesium=window.Cesium,console=window.console;__webpack_exports__["a"]={name:"cesiumDrawViewer",data:function(){return{visible:!0,editMode:!1,graphicType:void 0,menuSelected:{},layerManagerVisible:!1,markerColor:"rgba(255, 255,255, 1)",fontSize:"28px",markerFont:"sans-serif",markerOptionsVisible:!1,markerOption:"",lineColor:"rgba(247,224,32,1)",lineWidth:"3px",lineWidthList:["1px","2px","3px","4px","5px","6px","8px","10px","12px"],lineStyleList:[{value:"solid",name:"实线"},{value:"dash",name:"虚线"},{value:"glow",name:"发光线"},{value:"arrow",name:"箭头线"}],lineStyle:"solid",graphicHeight:"GROUND_ADN_MODEL",heightList:[{value:"GROUND_ADN_MODEL",name:"依附地形和模型"},{value:"GROUND",name:"依附地形"},{value:"MODEL",name:"依附模型"},{value:"NONE",name:"空间线"}],outlineWidth:"3px",outlineColor:"rgba(247,224,32,1)",polygonColor:"rgba(247,224,32,0.5)",outline:!0,imags:["./static/images/markers/1.png","./static/images/markers/2.png","./static/images/markers/3.png","./static/images/markers/4.png","./static/images/markers/5.png","./static/images/markers/6.png","./static/images/markers/7.png","./static/images/markers/8.png"],fontSizeList:["10px","12px","14px","16px","18px","20px","24px","32px","64px"],fontList:["sans-serif","宋体"],fontFamily:"sans-serif",modelMode:"Highlight",modelModeList:[{value:"Highlight",name:"高亮"},{value:"Replace",name:"替换"},{value:"Mix",name:"混合"}],modelColor:"#FFFFFF",modelMixed:.5,modelSelectPanelvisible:!1,selectedModel:void 0}},computed:{defaultImage:function(){return'this.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAB1UlEQVQ4T6XTMWgUQRQG4P/N3gaRSBpBEAMqrldkYyXu5VCMChZBEDxOsDIgKKSyECxTWERIYe2hRdoLeKV2RhCymwhy3E48b087C7EQtRDj7vyyg3dKDGyI087MN/97MyP4zyFF+5vNpnPEP3neZGlNlFwBoU/53rnBvn+AsPP+AFRWgUFNKVwgcVCAp4C0lJu10lTNiTGdYLLcyhF52e3uG8lUDVRnDXhagEP5YkM2pia9la0Jw413nhhzKfC9BxaI4t4aII3A9x6FcXJbBGNFZQ3jG3Yk0snjYMK7EelkHsBGMOEt7xSI4oQSxr3lin+8ngPG4MV2sQdgGPdvCviQkFsV/1jDAmu6f6c0wqWfm5grAiKd1EE0IbiaJ7VApN+egcF+KHWiCNhamgVekW4a9xdE4dsAeK716F7jLkJUNXOzmWq5/GG7vlggn4ji5BkEqzngQDYpXARQtdcErKRje2aq4+PfbaOJKcC5G/hH20NgPU7uU/AjJT47wD0Ao3+fSMgTBXwlOPvnBcoSweu/E/SuUdRFQ7YdwD6QopEnIzBtgfV2t8ySM5sSH3cF2D7oZD4jvpSAy0Wn5/MEPgGoDz/T6us3hx231KVgYSeAbTAx/Qs/Rdq4fXky6QAAAABJRU5ErkJggg=="'}},props:{attachment:void 0,extendMarkerImage:{type:Array,default:function(){return[]}},extendMarkerModel:{type:Array,default:function(){return[]}},tools:{default:void 0},viewer:{}},components:{MarkerViewer:_components_markerViewer__WEBPACK_IMPORTED_MODULE_11__["a"],layerManager:_layerManager__WEBPACK_IMPORTED_MODULE_13__["a"]},mounted:function(){var e=this;this.$nextTick((function(){Object(_js_utils__WEBPACK_IMPORTED_MODULE_16__["e"])("drawtoolPanel","drawtoolHead"),jquery__WEBPACK_IMPORTED_MODULE_17___default()("#drawtoolPanel .el-color-picker__icon").addClass("iconfont iconcolor")})),this.viewer instanceof Cesium.Viewer?this.init(this.viewer):window.viewer instanceof Cesium.Viewer&&this.init(window.viewer),this.$nextTick((function(){e.syncColor("markerColor",e.markerColor),e.syncColor("lineColor",e.lineColor),e.syncColor("polygonColor",e.polygonColor)}))},methods:{init:function(e){if(Object(_js_utils__WEBPACK_IMPORTED_MODULE_16__["c"])(e),!this._viewer){var t=this;this._depthTestAgainstTerrain=e.scene.globe.depthTestAgainstTerrain,this.$refs.markerManager.init(e),graphicManager=new _core_GraphicManager__WEBPACK_IMPORTED_MODULE_10__["a"](e),this.selectedModel=this.extendMarkerModel.length?this.extendMarkerModel[0].url:void 0,this.cesiumViewer=e,this._viewer=e,document.addEventListener("addEvent",(function(e){(graphicManager.has(e.detail.gvid)||t.$refs.markerManager.has(e.detail.gvid))&&t.pushLayerManaer(e.detail.gvtype,e.detail.gvid,e.detail.gvname)})),document.addEventListener("stopEdit",(function(){t.menuSelected={},t.editMode=!1,t.cesiumViewer.scene.globe.depthTestAgainstTerrain=t._depthTestAgainstTerrain})),document.addEventListener("startEdit",(function(e){t.menuSelected={},t.menuSelected[e.detail.graphicType]=!0,t.setControlByEvent(e),t.editMode=!0,/.*MODEL.*/.test(t.graphicHeight)&&(t.cesiumViewer.scene.globe.depthTestAgainstTerrain=!0)})),document.addEventListener("destroyEvent",(function(e){t.$refs.layerManager.drop({id:e.detail.gvid}),t.cesiumViewer.scene.globe.depthTestAgainstTerrain=t._depthTestAgainstTerrain})),document.addEventListener("deleteEvent",(function(e){t.menuSelected={},t.editMode=!1,t.$refs.layerManager.drop({id:e.detail.gvid}),t.cesiumViewer.scene.globe.depthTestAgainstTerrain=t._depthTestAgainstTerrain}))}},syncColor:function(e,t){var i=[e];"labelColor"===e?i.push("markerColor"):"markerColor"===e&&i.push("labelColor");var r,n=jquery__WEBPACK_IMPORTED_MODULE_17___default()(".el-color-picker__icon,.el-icon-arrow-down,.iconfont iconcolor"),a=_createForOfIteratorHelper(n);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=jquery__WEBPACK_IMPORTED_MODULE_17___default()(o).parent().parent();s.length>0&&i.includes(s[0].id)&&jquery__WEBPACK_IMPORTED_MODULE_17___default()(o).css("color",t)}}catch(l){a.e(l)}finally{a.f()}},pushLayerManaer:function(e,t,i){Object(_js_utils__WEBPACK_IMPORTED_MODULE_16__["b"])(this),this.$refs.layerManager.insertLayer(e,t,i)},modelThumb:function(e){return e.thumb?e.thumb:this.defaultImage},getById:function(e){return Object(_js_utils__WEBPACK_IMPORTED_MODULE_16__["b"])(this),graphicManager&&graphicManager.has(e)?graphicManager.get(e):this.$refs.markerManager?this.$refs.markerManager.getById(e):void 0},selectModel:function(e){Object(_js_utils__WEBPACK_IMPORTED_MODULE_16__["b"])(this),this.selectedModel=e.url,this.modelSelectPanelvisible=!1,this.$refs.markerManager.setModel({uri:e.url})},setControlByEvent:function(e){if(Object(_js_utils__WEBPACK_IMPORTED_MODULE_16__["b"])(this),"POLYGON"===e.detail.graphicType){var t=e.detail.material,i=e.detail.outlineColor;t&&(this.polygonColor="rgba(".concat(255*t.red,",").concat(255*t.green,",").concat(255*t.blue,",").concat(t.alpha,")")),this.outline=e.detail.outline,i&&(this.outlineColor="rgba(".concat(255*i.red,",").concat(255*i.green,",").concat(255*i.blue,",").concat(i.alpha,")")),this.outlineWidth=e.detail.outlineWidth,this.graphicHeight=e.detail.heightReference}else if("POLYLINE"===e.detail.graphicType){this.graphicHeight=e.detail.heightReference,this.lineWidth=e.detail.width;var r=e.detail.material;r instanceof Cesium.PolylineDashMaterialProperty?this.lineStyle="dash":r instanceof Cesium.PolylineGlowMaterialProperty?this.lineStyle="glow":r instanceof Cesium.PolylineArrowMaterialProperty?this.lineStyle="arrow":this.lineStyle="solid",this.lineColor="rgba(".concat(255*r.getValue().color.red,",").concat(255*r.getValue().color.green,",").concat(255*r.getValue().color.blue,",").concat(r.getValue().color.alpha,")")}},stopOthers:function(){Object(_js_utils__WEBPACK_IMPORTED_MODULE_16__["b"])(this),this.$refs.markerManager.stopPick(),graphicManager.destroyManager(),graphicManager.editManager=void 0},setLabel:function setLabel(){var option;Object(_js_utils__WEBPACK_IMPORTED_MODULE_16__["b"])(this);try{option=eval("("+this.markerOption+")"),this.$refs.markerManager.setLabel(option)}catch(err){console.log(err)}this.markerOptionsVisible=!1},updateMarker:function(e,t){Object(_js_utils__WEBPACK_IMPORTED_MODULE_16__["b"])(this),e&&(t=t||"未命名",this.$refs.layerManager.rename(null,e,t)),this.editMode=!1,this.menuSelected={}},addMarker:function(e,t,i){Object(_js_utils__WEBPACK_IMPORTED_MODULE_16__["b"])(this),this.pushLayerManaer(i,e,t),i===_core_GraphicType__WEBPACK_IMPORTED_MODULE_14__["a"].MODEL&&(this.editMode=!1,this.menuSelected={})},closeLayerManager:function(){this.layerManagerVisible=!1},exportGraphic:function(e){Object(_js_utils__WEBPACK_IMPORTED_MODULE_16__["b"])(this),"MARKER"===e||"LABEL"===e?this.$refs.markerManager.export(e):graphicManager.export(e)},importGraphic:function(){Object(_js_utils__WEBPACK_IMPORTED_MODULE_16__["b"])(this),document.getElementById("graphicuploadhandler").click()},importfp:function(){Object(_js_utils__WEBPACK_IMPORTED_MODULE_16__["b"])(this);var e=this,t=event||window.event,i=t.target.files,r=i[0].name.split(".")[1];if(0!=i.length){var n=new FileReader;"geojson"===r.toLowerCase()?(n.readAsText(i[0]),n.onload=function(){if(this.result){try{var t,i=JSON.parse(this.result).features,r=_createForOfIteratorHelper(i);try{for(r.s();!(t=r.n()).done;){var n=t.value;"POINT"===n.geometry.type.toUpperCase()?e.$refs.markerManager.import(n):graphicManager.import(n)}}catch(a){r.e(a)}finally{r.f()}}catch(o){console.log(o)}document.getElementById("graphicuploadhandler").value=""}}):"shp"===r.toLowerCase()&&(n.readAsArrayBuffer(i[0]),n.onload=function(){Object(shapefile__WEBPACK_IMPORTED_MODULE_15__["a"])(this.result).then((function(t){return t.read().then((function i(r){if(r.done)return!1;var n=r.value;return"Point"===n.geometry.type?e.$refs.markerManager.import(n):graphicManager.import(n),t.read().then(i)}))})).catch((function(e){return console.error(e.stack)}))},document.getElementById("graphicuploadhandler").value="")}},editMarker:function(e){Object(_js_utils__WEBPACK_IMPORTED_MODULE_16__["b"])(this),this.editMode=!0,graphicManager.editManager&&(graphicManager.editManager.stopEdit(),graphicManager.editManager=void 0),this.menuSelected={},this.menuSelected[e]=!0},clearGraphic:function(){this.$refs.markerManager.removeAll(),graphicManager.removeAll()},deleteMarker:function(e){Object(_js_utils__WEBPACK_IMPORTED_MODULE_16__["b"])(this),this.menuSelected["MARKER"]=!1,this.editMode=!1,this.$refs.layerManager.drop(e)},locateGraphic:function(e){if(Object(_js_utils__WEBPACK_IMPORTED_MODULE_16__["b"])(this),graphicManager.manager.has(e)){var t=graphicManager.manager.get(e);t.zoomTo()}else this.$refs.markerManager.zoomTo(e);this.$emit("locateEvent",e)},editGraphic:function(e){Object(_js_utils__WEBPACK_IMPORTED_MODULE_16__["b"])(this),graphicManager.manager.has(e)?graphicManager.edit(e):this.$refs.markerManager.edit(e),this.$emit("editEvent",e)},selectGraphic:function(e,t){Object(_js_utils__WEBPACK_IMPORTED_MODULE_16__["b"])(this),"marker"===e?this.$refs.markerManager.select(_core_GraphicType__WEBPACK_IMPORTED_MODULE_14__["a"].MARKER,void 0,t):"label"===e?this.$refs.markerManager.select(_core_GraphicType__WEBPACK_IMPORTED_MODULE_14__["a"].LABEL,void 0,t):"model"===e?this.$refs.markerManager.select(_core_GraphicType__WEBPACK_IMPORTED_MODULE_14__["a"].MODEL,void 0,t):"polyline"===e?graphicManager.select(_core_GraphicType__WEBPACK_IMPORTED_MODULE_14__["a"].POLYLINE,void 0,t):"label"===e?graphicManager.select(_core_GraphicType__WEBPACK_IMPORTED_MODULE_14__["a"].POLYGON,void 0,t):graphicManager.manager.has(e)?graphicManager.select(void 0,e,t):this.$refs.markerManager.select(void 0,e,t),this.$emit("selectEvent",e,t)},deleteGraphic:function(e){if(Object(_js_utils__WEBPACK_IMPORTED_MODULE_16__["b"])(this),graphicManager.manager.has(e)){var t=graphicManager.manager.get(e);t.destroy(),graphicManager.manager.delete(e)}else this.$refs.markerManager.drop(e);this.$emit("deleteEvent",e)},renameGraphic:function(e,t){Object(_js_utils__WEBPACK_IMPORTED_MODULE_16__["b"])(this);var i,r=/(.*?)</g.exec(t);t=/(.*?)</g.test(t)?r[1]:t,"未命名"===t&&(t=""),graphicManager.has(e)?(i=graphicManager.get(e).gvname,graphicManager.rename(e,t)):(i=this.$refs.markerManager.markerManager.get(e).gvname,this.$refs.markerManager.rename(e,t)),this.$emit("renameEvent",e,i)},menuAction:function(e){Object(_js_utils__WEBPACK_IMPORTED_MODULE_16__["b"])(this);var t=["MARKER","POLYLINE","POLYGON","LABEL","MODEL"],i=this.menuSelected[e];switch(this.menuSelected={},graphicManager&&(graphicManager.tip.visible=!1),this.menuSelected[e]=!i,t.includes(e)?(this.graphicType===e?this.editMode=!this.editMode:this.editMode=!0,this.graphicType=e):this.editMode=!1,this.stopOthers(e),/.*MODEL*/.test(this.graphicHeight)&&(["MARKER","LABEL","MODEL","LAYER"].includes(e)||(this.cesiumViewer.scene.globe.depthTestAgainstTerrain=!0)),e){case"MARKER":this.editMode?this.$refs.markerManager.pick("marker"):this.$refs.markerManager.cancelMark();break;case"POLYLINE":this.heightList[3].name="空间线",this.editMode?(graphicManager.heightReference=this.graphicHeight,graphicManager.material=Cesium.Color.fromCssColorString(this.lineColor),graphicManager.createPolyline()):graphicManager.destroyManager();break;case"POLYGON":if(this.heightList[3].name="空间面",this.editMode){graphicManager.heightReference=this.graphicHeight;var r=_core_Graphic__WEBPACK_IMPORTED_MODULE_12__["e"].defaultStyle;r.outline=this.outline,r.outlineColor=Cesium.Color.fromCssColorString(this.outlineColor),r.outlineWidth=parseInt(this.outlineWidth),graphicManager.material=Cesium.Color.fromCssColorString(this.polygonColor),graphicManager.style=r,graphicManager.createPolygon()}else graphicManager.destroyManager();break;case"LABEL":this.editMode?this.$refs.markerManager.pick("label"):this.$refs.markerManager.cancelMark();break;case"MODEL":if(this.editMode){if(this.extendMarkerModel.length<1)throw this.editMode=!1,new Error("没有可用的模型");this.$refs.markerManager.setModel({uri:this.selectedModel}),this.$refs.markerManager.pick("model")}else this.$refs.markerManager.cancelMark()}},setLineMaterial:function(e,t){switch(Object(_js_utils__WEBPACK_IMPORTED_MODULE_16__["b"])(this),e){case"solid":graphicManager.material=t;break;case"dash":graphicManager.material=new Cesium.PolylineDashMaterialProperty({color:t});break;case"glow":graphicManager.material=new Cesium.PolylineGlowMaterialProperty({color:t});break;case"arrow":graphicManager.material=new Cesium.PolylineArrowMaterialProperty(t);break}}},watch:{fontSize:function(e){e=parseInt(e),isNaN(e)&&(e="18"),e+="px";var t=this.menuSelected["MARKER"]?this.markerFont:this.fontFamily;this.$refs.markerManager.setFont(e+" "+t)},markerColor:function(e){e&&(this.$refs.markerManager.setColor(Cesium.Color.fromCssColorString(e)),this.syncColor("markerColor",e))},graphicHeight:function(e){void 0!==e&&(graphicManager.heightReference=e)},lineColor:function(e){if(e){var t=Cesium.Color.fromCssColorString(e),i=graphicManager.editManager.material,r="solid";i instanceof Cesium.PolylineDashMaterialProperty?r="dash":i instanceof Cesium.PolylineGlowMaterialProperty?r="glow":i instanceof Cesium.PolylineArrowMaterialProperty&&(r="arrow"),this.setLineMaterial(r,t),this.syncColor("lineColor",e)}},lineStyle:function(e){if(this.lineColor){var t=Cesium.Color.fromCssColorString(this.lineColor);this.setLineMaterial(e,t)}},lineWidth:function(e){var t=parseInt(e);isNaN(t)&&(t=3),graphicManager.style={width:t}},outline:function(e){if(e){graphicManager.editManager.createOutline();var t=Cesium.Color.fromCssColorString(this.outlineColor),i=parseInt(this.outlineWidth)||3;graphicManager.editManager.outline=e,graphicManager.style={outline:!0,outlineWidth:i,outlineColor:t}}else graphicManager.editManager.removeOutline()},polygonColor:function(e){if(e){var t=Cesium.Color.fromCssColorString(e);graphicManager.material=t,this.syncColor("polygonColor",e)}},outlineColor:function(e){if(e){var t=Cesium.Color.fromCssColorString(e);graphicManager.style={outlineColor:t},this.syncColor("outlineColor",e)}},outlineWidth:function(e){var t=parseInt(e)||3;graphicManager.style={outlineWidth:t}},fontFamily:function(e){var t=parseInt(this.fontSize);isNaN(t)&&(t="18"),t+="px",this.$refs.markerManager.setFont(t+" "+e)},modelColor:function(e){if(e){var t=Cesium.Color.fromCssColorString(e);this.$refs.markerManager.setModel({color:t}),this.syncColor("modelColor",e)}},modelMode:function(e){var t=Cesium.ColorBlendMode[e.toUpperCase()];this.$refs.markerManager.setModel({mode:t})},modelMixed:function(e){this.$refs.markerManager.setModel({mixed:e})}}}},"2c79":function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{style:{left:e.winPos.x+"px",top:e.winPos.y+"px"},attrs:{id:"markerContainer"}},[i("el-dialog",{attrs:{title:e.markName+"附件",visible:e.dialogVisible,"modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-upload",{ref:"upload",staticClass:"upload-class",attrs:{action:e.attachment.action,"on-remove":e.attachment.delete,"on-success":e.attachment.success,"file-list":e.attachment.fileList,"on-preview":e.attachment.download,"auto-upload":!1}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:function(t){return e.$refs.upload.submit()}}},[e._v("上传到服务器")])],1)],1),"marker"===e.markMode?i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],attrs:{id:"createMerkerPanel"}},[i("el-container",{directives:[{name:"show",rawName:"v-show",value:!e.selectPanel,expression:"!selectPanel"}]},[i("el-header",[i("span",[e._v("添加标记")]),e.attachment.enabled?i("i",{staticClass:"el-icon-paperclip",staticStyle:{"font-size":"16px"},attrs:{title:"附件"},on:{click:function(t){e.dialogVisible=!0}}}):e._e(),i("span",{staticClass:"closebtn iconfont iconclose",on:{click:function(t){e.visible=!1}}})]),i("el-container",{attrs:{id:"marker-panel"}},[i("el-container",[i("el-main",{staticClass:"marker-main-class"},[e._v("\n                        名称：\n                        "),i("el-input",{ref:"nameinput",nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.update(t)}},model:{value:e.markName,callback:function(t){e.markName=t},expression:"markName"}}),i("br"),e._v("描述：\n                        "),i("el-input",{attrs:{type:"textarea"},model:{value:e.markRemark,callback:function(t){e.markRemark=t},expression:"markRemark"}})],1),i("el-aside",[i("img",{attrs:{src:e.selectedImage}}),i("br"),i("a",{attrs:{href:"#",id:"imageC"},on:{click:function(t){e.selectPanel=!0}}},[e._v("更换")])])],1),i("el-footer",[i("el-button",{attrs:{type:"danger",id:"cancelbtn",plain:"",size:"mini"},on:{click:e.cancelMark}},[e._v("删除")]),i("el-button",{attrs:{type:"primary",plain:"",size:"mini",id:"submitbtn"},on:{click:e.update}},[e._v("确定")])],1)],1)],1),i("el-container",{directives:[{name:"show",rawName:"v-show",value:e.selectPanel,expression:"selectPanel"}],staticClass:"image-list-class"},e._l(e.images,(function(t,r){return i("img",{key:r,attrs:{src:t},on:{click:function(i){return e.changeHandler(t)}}})})),0)],1):e._e(),"label"===e.markMode?i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],style:{left:e.winPos.x+"px",top:e.winPos.y+"px"},attrs:{id:"createLabelPanel"}},[i("el-input",{nativeOn:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.update(t)}},model:{value:e.markName,callback:function(t){e.markName=t},expression:"markName"}}),i("el-button",{attrs:{size:"mini"},on:{click:e.update}},[e._v("确定")])],1):e._e(),i("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"file",id:"uploadhandler",accept:".json"},on:{change:e.importMarks}})],1)},n=[],a=(i("ac67"),i("1bc7"),i("32ea"),i("547b")),o=i("a07a"),s=(i("a450"),i("9f60"),i("94f0"),i("2843"),i("4057"),i("0c84"),i("3e38"),i("fffd")),l=i("0029"),c=i("cd53"),d=i("9944"),h=i("4ab0"),u=i("a336"),p=i.n(u);function m(e,t){var i;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=g(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function g(e,t){if(e){if("string"===typeof e)return f(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function v(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function _(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?v(Object(i),!0).forEach((function(t){Object(o["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var y=window.Cesium,k=y.defined,M=d["d"].CVT,b=y.ScreenSpaceEventType.LEFT_CLICK,w=y.ScreenSpaceEventType.RIGHT_CLICK,E=y.ScreenSpaceEventType.MOUSE_MOVE;function O(e,t){for(var i=0,r="",n=0;n<e.length;n++)if(e.charCodeAt(n)>128?i+=2:i++,r+=e.charAt(n),i>=t)return r+"...";return r}var C=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c["a"].defaultStyle,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c["a"].defaultLabelStyle,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c["c"].defaultStyle;Object(s["a"])(this,e),t instanceof y.Viewer&&(this._viewer=t),y.defined(this._viewer)&&(this.markName="",this.markRemark="",this.markMode="marker",this.defaultImage=c["a"].defaultStyle.image,this.selectedImage=void 0,this.popWinPosition=void 0,this.markerid=void 0,this.markerOptions=i,this.labelOptions=r,this.modelOptions=n,this.cursorTip=new d["d"].CursorTip("左键标绘，右键结束.","marker-tip",t),this.cursorTip.visible=!1,this.handler=new y.ScreenSpaceEventHandler(t.canvas),this.manager=new Map,this.pickHandler=new y.ScreenSpaceEventHandler(t.canvas),this.init(this._viewer))}return Object(l["a"])(e,[{key:"init",value:function(e){if(e instanceof y.Viewer===!1)throw new Error("viewer不是一个有效的Cesium Viewer对象.");var t=this.handler,i=this,r=this.manager;e.scene.postRender.addEventListener((function(){if(k(i.popWinPosition)){var t=M.cartesian2Pixel(i.popWinPosition,e),r=document.getElementById("popContainer");if(!r)return;r.style.left=t.x-100-5+"px",r.style.top=t.y-110+"px";var n=i.popWinPosition;d["d"].pointVisibilityOnEarth(n,i._viewer)?r.style.display="block":r.style.display="none"}}));var n=function(t){var n=e.scene.pick(t.position);k(n)&&n.id instanceof y.Entity&&n.id.gvtype===h["a"].MARKER?(i.selectedMarker=r.get(n.id.gvid),i.popDiv?i.destroyPopPanle():i.createPopPanel()):i.destroyPopPanle()};t.setInputAction(n,b)}},{key:"pick",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"marker",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"single";this.markMode=e;var i=this._viewer;this.cursorTip.visible=!0;var r=this.pickHandler,n=this,a=this.generateId();n.markerid=a;var o=this.manager,s=function(s){var l=M.pixel2Cartesian(s.position,i);if(y.defined(l)){var c;c="marker"===e?n.createMarker(l):"label"===e?n.createLabel(l):"model"===e?n.createModel(l):n.createMarker(l),n.visible=!0,o.set(a,c),c.gvid=a,n.selectedMarker=c,n.activeMarker=c,n.cursorTip.visible=!1,"model"===e&&(n.activeMarker=void 0),"single"===t&&(r.removeInputAction(b),r.removeInputAction(w));var d=new CustomEvent("marker-add",{detail:{id:c.gvid,name:c.gvname||"未命名",description:c.description,type:c.gvtype,position:M.toDegrees(l,n._viewer)}});window.dispatchEvent(d),c=void 0}},l=function(){r.removeInputAction(b),r.removeInputAction(w),n.cursorTip.visible=!1;var e=n.activeMarker?n.activeMarker.id:void 0,t=new CustomEvent("marker-delete",{detail:{id:e}});window.dispatchEvent(t),n.activeMarker=void 0},c=function(e){n.cursorTip.updatePosition(e.endPosition)};r.setInputAction(l,w),r.setInputAction(s,b),r.setInputAction(c,E)}},{key:"get",value:function(e){if(this.has(e))return this.manager.get(e)}},{key:"has",value:function(e){return!!this.manager&&this.manager.has(e)}},{key:"createMarker",value:function(e){var t=this.labelOptions,i=new c["a"](this._viewer,_(_({},this.markerOptions),{},{position:e,image:this.selectedImage}),t);return i}},{key:"changeHandler",value:function(e){this.selectedImage=e,this.activeMarker.updateImage(this.selectedImage)}},{key:"panelPosition",value:function(){if(this.activeMarker){if("marker"===this.markMode){var e=this.activeMarker.graphic.position.getValue(),t=M.cartesian2Pixel(e,this._viewer),i=t.x>170?t.x-170:t.x+10,r=t.y>210?t.y-240:t.y+50;return{x:i,y:r}}var n=this.activeMarker.graphic.position.getValue(),a=M.cartesian2Pixel(n,this._viewer),o=a.x+10,s=a.y-25;return{x:o,y:s}}return{x:0,y:0}}},{key:"createLabel",value:function(e){var t=this.labelOptions;t.position=e;var i=new c["b"](this._viewer,t);return i}},{key:"createModel",value:function(e){var t=this.modelOptions;t.position=e;var i=new c["c"](this._viewer,t);return i}},{key:"removeEventListener",value:function(){var e=this.pickHandler;e&&(e.isDestroyed()||(e.removeInputAction(b),e.removeInputAction(w),e.removeInputAction(E)))}},{key:"stopPick",value:function(){if(this.removeEventListener(),this.activeMarker){this.activeMarker.destroy();var e=new CustomEvent("marker-delete",{detail:{id:this.activeMarker.gvid}});window.dispatchEvent(e)}this.activeMarker=void 0,this.cursorTip.visible=!1}},{key:"zoomTo",value:function(e){this.manager.has(e)&&this.manager.get(e).zoomTo()}},{key:"edit",value:function(e){var t=this.manager;if(t.has(e)){var i=t.get(e);this.activeMarker=i,i.startEdit(),i.gvtype!==h["a"].MARKER&&i.gvtype!==h["a"].LABEL||(this.markName=this.activeMarker.gvname,this.markRemark=this.activeMarker.description,this.visible=!0);var r=this.panelPosition(),n=new CustomEvent("marker-edit",{detail:{name:this.markName,remark:this.markRemark,type:this.activeMarker.type,pos:r}});window.dispatchEvent(n)}}},{key:"drop",value:function(e){var t=this.manager.get(e);t&&t.destroy(),this.manager.delete(e)}},{key:"rename",value:function(e,t){var i=this.manager.get(e);i.gvname=t}},{key:"select",value:function(e,t,i){if(k(t)){var r=this.manager.get(t);k(r)&&(r.show=i)}if(k(e)){var n,a=this.manager.values(),o=m(a);try{for(o.s();!(n=o.n()).done;){var s=n.value;s.gvtype===e&&(s.show=i)}}catch(l){o.e(l)}finally{o.f()}}}},{key:"destroyPopPanle",value:function(){this.popDiv&&(p()(this.popDiv).remove(),this.popDiv=void 0)}},{key:"destroy",value:function(){this.removeAll(),this.destroyPopPanle(),this.pickHandler.isDestroyed()||this.pickHandler.destroy(),this.handler.isDestroyed()||this.handler.destroy(),this._viewer=void 0,this.labelOptions=void 0,this.markerOptions=void 0,this.modelOptions=void 0}},{key:"createPopPanel",value:function(){if(k(this.selectedMarker)){this.popDiv&&this.destroyPopPanle();var e=document.createElement("div");e.id="popContainer",e.className="marker-popWin-class";var t=this.selectedMarker.position;this.popWinPosition=t;var i,r=M.cartesian2Degrees(t,this._viewer);e.style.display="none",i=document.createElement("span"),i.title=this.selectedMarker.description,i.innerText="描述:"+O(this.selectedMarker.description||"暂无",14);var n=document.createElement("span");n.innerText="纬度:"+r.lon.toFixed(2)+"  纬度:"+r.lat.toFixed(2);var a=document.createElement("div");a.className="arrow";var o=document.createElement("span");o.className="iconfont iconclose closebtn";var s=this;o.onclick=function(){p()(s.popDiv).remove(),s.popDiv=void 0},e.appendChild(o),i&&e.appendChild(i),e.appendChild(n),e.appendChild(a),this.popDiv=e,this._viewer.container.appendChild(this.popDiv)}}},{key:"import",value:function(e){if("POINT"!==e.geometry.type.toUpperCase())throw new Error("无效的数据类型.");var t,i=this.generateId();if(e.properties.gvtype===h["a"].LABEL){var r,n=c["b"].defaultStyle;n.position=(r=y.Cartesian3).fromDegrees.apply(r,Object(a["a"])(e.geometry.coordinates)),n.text=e.properties.name,t=new c["b"](this._viewer,n)}else{var o={lon:e.geometry.coordinates[0],lat:e.geometry.coordinates[1],height:e.geometry.coordinates[2]};t=c["a"].fromDegrees(this._viewer,o)}t.gvname=e.properties.name,t.gvid=i,this.manager.set(i,t);var s=new CustomEvent("marker-add",{detail:{id:t.gvid,name:t.gvname||"未命名",type:t.gvtype,description:t.description,properties:e.properties,position:{lon:e.geometry.coordinates[0],lat:e.geometry.coordinates[1],height:e.geometry.coordinates[2]}}});window.dispatchEvent(s)}},{key:"addMarker",value:function(e){this.manager.set(e.gvid,e)}},{key:"export",value:function(e){var t,i=this.manager.values(),r={type:"FeatureCollection",name:"graphic",crs:{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}},features:[]},n=m(i);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.type===e&&r.features.push(a.toGeoJson())}}catch(s){n.e(s)}finally{n.f()}var o=new Blob([JSON.stringify(r)],{type:""});window.saveAs(o,e+parseInt(y.getTimestamp())+".geojson")}},{key:"font",get:function(){if(this.activeMarker)return this.activeMarker.font},set:function(e){this.labelOptions.font=e,this.activeMarker&&(this.activeMarker.font=e)}},{key:"color",set:function(e){this.labelOptions.fillColor=e,this.activeMarker&&(this.activeMarker.color=e)}},{key:"label",set:function(e){for(var t=Object.keys(e),i=0,r=t;i<r.length;i++){var n=r[i];this.labelOptions[n]=e[n]}this.activeMarker&&this.activeMarker.setLabel(this.labelOptions)}},{key:"model",set:function(e){this.modelOptions=_(_({},this.modelOptions),e),this.activeMarker&&(e.uri&&(this.activeMarker.uri=e.uri),e.color&&(this.activeMarker.color=e.color),void 0!=e.mode&&(this.activeMarker.model=e.mode),void 0!=e.mixed&&(this.activeMarker.mixed=e.mixed))}},{key:"removeAll",value:function(){var e,t=this.manager.values(),i=m(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;r.remove(),r.destroy()}}catch(n){i.e(n)}finally{i.f()}this.manager.clear()}},{key:"cancelMark",value:function(){this.activeMarker&&this.activeMarker.destroy(),this.activeMarker=void 0,this.cursorTip.visible=!1;var e=new CustomEvent("marker-delete",{detail:{id:this.markerid}});window.dispatchEvent(e),this.markName="",this.markRemark="",this.manager.delete(this.markerid),this.markerid=void 0,this.removeEventListener()}},{key:"update",value:function(e,t){this.markName=e,this.markRemark=t,this.activeMarker.updateText(this.markName,this.markRemark),this.cursorTip.visible=!1,this.activeMarker.stopEdit();var i=new CustomEvent("marker-update",{detail:{id:this.activeMarker.gvid,name:this.activeMarker.gvname,description:this.activeMarker.description,position:M.toDegrees(this.activeMarker.position,this._viewer)}});window.dispatchEvent(i),this.activeMarker=void 0,this.removeEventListener()}},{key:"generateId",value:function(){return(1e7*Math.random()).toString(16).substr(0,4)+"-"+(new Date).getTime()+"-"+Math.random().toString().substr(2,5)}}]),e}();function P(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function A(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?P(Object(i),!0).forEach((function(t){Object(o["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):P(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var L={name:"cesiumMarkerViewer",data:function(){return{visible:!1,selectPanel:!1,markName:"",markRemark:"",images:[],markMode:"",winPos:{x:0,y:0},dialogVisible:!1,fileList:[]}},computed:{},components:{},props:{extendImage:{type:Array,default:function(){return[]}},attachment:{default:function(){return{enabled:!1,method:""}}}},directives:{focus:{bind:function(e){e.focus()},updated:function(e){e.focus()},inserted:function(e){e.focus()}}},mounted:function(){var e=this;window.addEventListener("marker-edit",(function(t){var i=t.detail.type;e.visible=!0,e.markName=t.detail.name,e.markRemark=t.detail.remark,e.winPos=A({},t.detail.pos),e.$emit("editEvent",i)})),window.addEventListener("marker-add",(function(t){e.winPos=e.markerManager.panelPosition(),e.visible=!0,e.$emit("addEvent",t.detail.id,t.detail.name,t.detail.type)})),window.addEventListener("marker-delete",(function(t){e.visible=!1,e.$emit("deleteEvent",t.detail.id),e.markName="",e.markRemark=""})),window.addEventListener("marker-update",(function(t){e.$emit("updateEvent",t.detail.id,t.detail.name),e.markName="",e.markRemark=""})),this.$nextTick((function(){d["d"].moveDiv("markerContainer")}))},methods:{init:function(e){this._viewer||(Object(d["c"])(e),this._viewer=e,!this.markerManager&&(this.markerManager=new C(e)),this.images=[this.markerManager.defaultImage].concat(Object(a["a"])(this.extendImage)),this.selectedImage=this.markerManager.defaultImage)},pick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"marker",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"single";if(Object(d["b"])(this),this.markerManager)return this.markMode=e,this.markerManager.pick(e,t)},createMarker:function(e){if(this.markerManager)return this.markerManager.createMarker(e)},panelPosition:function(){if(this.markerManager)return this.markerManager.panelPosition()},createLabel:function(e){if(this.markerManager)return this.markerManager.createLabel(e)},createModel:function(e){if(this.markerManager)return this.markerManager.createLabel(e)},removeEventListener:function(){if(this.markerManager)return this.markerManager.removeEventListener()},stopPick:function(){this.markerManager&&this.markerManager.stopPick()},zoomTo:function(e){this.markerManager&&this.markerManager.zoomTo(e)},edit:function(e){this.markerManager&&this.markerManager.edit(e)},drop:function(e){this.markerManager&&this.markerManager.drop(e)},rename:function(e,t){this.markerManager&&this.markerManager.rename(e,t)},select:function(e,t,i){this.markerManager&&this.markerManager.select(e,t,i)},destroyPopPanle:function(){this.markerManager&&this.markerManager.destroyPopPanle()},createPopPanel:function(){this.markerManager&&this.markerManager.createPopPanel()},import:function(e){this.markerManager&&(this.markerManager.createPopPanel(),this.markerManager.import(e))},export:function(e){this.markerManager&&this.markerManager.export(e)},setFont:function(e){this.markerManager&&(this.markerManager.font=e)},getFont:function(){if(this.activeMarker)return this.markerManager.font},setColor:function(e){this.markerManager&&(this.markerManager.color=e)},setLabel:function(e){this.markerManager&&(this.markerManager.label=e)},setModel:function(e){this.markerManager&&(this.markerManager.model=e)},removeAll:function(){this.markerManager&&this.markerManager.removeAll()},cancelMark:function(){this.markerManager&&this.markerManager.cancelMark()},update:function(){this.markerManager&&(this.markerManager.update(this.markName,this.markRemark),this.visible=!1)},changeHandler:function(e){this.markerManager&&(this.markerManager.changeHandler(e),this.selectedImage=e),this.selectPanel=!1},generateId:function(){if(this.markerManager)return this.markerManager.generateId()},getById:function(e){if(this.has(e))return this.markerManager.get(e)},has:function(e){return!!this.markerManager&&this.markerManager.has(e)},importMarks:function(){}},watch:{}},D=L,I=(i("12a4"),i("5d22")),x=Object(I["a"])(D,r,n,!1,null,"5ecf13eb",null);t["a"]=x.exports},3762:function(e,t,i){"use strict";i("8250")},"3a10":function(e,t,i){},"45ea":function(e,t,i){"use strict";i("5040")},"4ab0":function(e,t,i){"use strict";var r=function(){function e(){}return e.MARKER=0,e.POINT=5,e.POLYLINE=1,e.POLYGON=2,e.LABEL=3,e.MODEL=4,e}();t["a"]=r},"4e00":function(e,t,i){"use strict";i("9f60"),i("94f0"),i("2843"),i("a450"),i("4057"),i("32ea"),i("1bc7"),i("0c84"),i("3e38");var r=i("fffd"),n=i("0029"),a=i("cd53"),o=i("9944"),s=i("4ab0"),l=i("31bf");function c(e,t){var i;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=d(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function d(e,t){if(e){if("string"===typeof e)return h(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var u=window.Cesium,p=u.defined,m=window.console,g=u.ScreenSpaceEventType.LEFT_CLICK,f=u.ScreenSpaceEventType.RIGHT_CLICK,v=u.ScreenSpaceEventType.MOUSE_MOVE,_=u.ScreenSpaceEventType.LEFT_DOWN,y=u.ScreenSpaceEventType.LEFT_UP,k=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Object(r["a"])(this,e),t instanceof u.Viewer===!1)throw new Error("viewer不是一个有效的Cesium Viewer");this.viewer=t,this.options=i,this._heightReference="CLAMP_TO_GROUND",this._material=void 0,this._style={},this.graphicId=void 0,this.handler=new u.ScreenSpaceEventHandler(this.viewer.canvas),this.graphicType=void 0,this.positions=[],this.tip=new o["d"].CursorTip(""),this.tip.visible=!1,this.mode="ready",this.dragging=!1,this.editManager=void 0,this.selectedNodeIndex=-1,this.manager=new Map;var n=this;document.onkeydown=function(e){if("edit"===n.mode){var t=e||window.event||arguments.callee.caller.arguments[0];if(t&&46==t.keyCode)if(n.selectedNodeIndex>-1&&n.editManager)n.editManager.dropNode(n.selectedNodeIndex),n.highlightedNode(void 0,n.editManager.nodeGraphic),n.selectedNodeIndex=-1;else if(n.editManager){n.editManager.destroy(),n.manager.delete(n.editManager.id),n.mode="end",n.tip.visible=!1;var i=new CustomEvent("deleteEvent",{detail:{gvid:n.editManager?n.editManager.gvid:void 0}});document.dispatchEvent(i),n.editManager=void 0}}}}return Object(n["a"])(e,[{key:"heightReference",get:function(){return this._heightReference},set:function(e){if(this._heightReference=e,this.editManager)if(this.editManager.heightReference=e,"POLYLINE"===this.editManager.type)this.editManager.graphic.polyline.clampToGround=/.*GROUND.*/.test(e),this.editManager.options.polyline.clampToGround=/.*GROUND.*/.test(e);else if("POLYGON"===this.editManager.type){var t=this.editManager.graphic,i=this.editManager.options;/.*GROUND.*/.test(e)?(t.polygon.perPositionHeight=!1,this.editManager.outline&&(this.editManager.outlineGraphic.graphic.polyline.clampToGround=!0),i.polygon.perPositionHeight=!1):(t.polygon.perPositionHeight=!0,this.editManager.outline&&(this.editManager.outlineGraphic.graphic.polyline.clampToGround=!1),i.polygon.perPositionHeight=!0)}}},{key:"material",get:function(){return this._material},set:function(e){this._material=e,this.editManager&&("POLYLINE"===this.editManager.type?(this.editManager.graphic.polyline.material=this._material,this.editManager.options.polyline.material=this._material):"POLYGON"===this.editManager.type&&(this.editManager.graphic.polygon.material=this._material,this.editManager.options.polygon.material=this._material))}},{key:"style",get:function(){return this._style},set:function(e){if(this._style=e,this.editManager){for(var t=Object.keys(e),i=0,r=t;i<r.length;i++){var n=r[i];"POLYLINE"===this.editManager.type?(this.editManager.graphic.polyline[n]=e[n],this.editManager.options.polyline[n]=e[n]):"POLYGON"===this.editManager.type&&("outline"!==n&&(this.editManager.graphic.polygon[n]=e[n]),this.editManager.options.polygon[n]=e[n])}"POLYGON"===this.editManager.type&&(this.editManager.outlineStyle=e)}}},{key:"createPolyline",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a["f"].defaultStyle;this.graphicType=s["a"].POLYLINE;var t=this.generateId();e.positions=this.positions,/.*GROUND.*/.test(this._heightReference)?e.clampToGround=!0:e.clampToGround=!1,e.material=this.material||e.material,e.width=this.style.width||e.width;var i=new a["f"](this.viewer,e);this.tip.updateText("左键标绘，右键结束."),this.tip.visible=!0,i.gvid=t,i.heightReference=this.heightReference,this.manager.set(t,i),this.graphicId=t,this.editManager=i;var r=new CustomEvent("addEvent",{detail:{gvid:i.gvid,gvtype:i.gvtype,gvname:i.gvname}});document.dispatchEvent(r);var n=this;return this.handler.setInputAction((function(e){n.tip&&n.tip.updatePosition(e.endPosition)}),v),this.addEventListener(),i}},{key:"createPolygon",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a["e"].defaultStyle;this.graphicType=s["a"].POLYGON;var t=this.generateId();this.graphicId=t,e.positions=this.positions,/.*GROUND.*/.test(this._heightReference)?e.perPositionHeight=!1:e.perPositionHeight=!0,e.material=this.material||e.material,e.outlineWidth=this.style.outlineWidth||e.outlineWidth,e.outlineColor=this.style.outlineColor||e.outlineColor;var i=new a["e"](this.viewer,e);i.gvid=t,i.heightReference=this.heightReference,this.tip.visible=!0,this.tip.updateText("左键标绘，右键结束."),this.manager.set(t,i),this.editManager=i;var r=new CustomEvent("addEvent",{detail:{gvid:i.gvid,gvtype:i.gvtype,gvname:i.gvname}});document.dispatchEvent(r);var n=this;return this.handler.setInputAction((function(e){n.tip&&n.tip.updatePosition(e.endPosition)}),v),this.addEventListener(),i}},{key:"generateId",value:function(){return(1e7*Math.random()).toString(16).substr(0,4)+"-"+(new Date).getTime()+"-"+Math.random().toString().substr(2,5)}},{key:"isKnownGraphic",value:function(e){return!(!(p(e)&&e.id instanceof u.Entity)||e.id.gvtype!==s["a"].POLYLINE&&e.id.gvtype!==s["a"].POLYGON&&e.id.gvtype!==s["a"].POINT)}},{key:"highlightedNode",value:function(e,t){var i,r=a["d"].selectedStyle,n=a["d"].defaultStyle,o=c(t.graphic);try{for(o.s();!(i=o.n()).done;){var s=i.value;s===e?a["d"].setStyle(s,r):a["d"].setStyle(s,n)}}catch(l){o.e(l)}finally{o.f()}}},{key:"addEventListener",value:function(){var e=this,t=this.viewer,i=function(i){if("edit"!==e.mode){if(e.graphicType==s["a"].POLYLINE||e.graphicType==s["a"].POLYGON){var r=o["a"].pixel2Cartesian(i.position,e.viewer);if(/.*MODEL.*/.test(e._heightReference)){if(!t.scene.pickPositionSupported)return void m.log("This browser does not support pickPosition.");r=t.scene.pickPosition(i.position)}0===e.manager.get(e.graphicId).positions.length&&(e.handler.removeInputAction(v),e.handler.setInputAction(n,v)),p(r)&&e.manager.has(e.graphicId)&&e.manager.get(e.graphicId).addNode(r),e.mode="create"}}else{if(!e.editManager)return void e.removeEventListener();var a,d=e.editManager.nodeGraphic||e.editManager.outlineGraphic.nodeGraphic,h=t.scene.drillPick(i.position),u=!1,g=void 0,f=c(h);try{for(f.s();!(a=f.n()).done;){var y=a.value;if(u=e.isKnownGraphic(y),u&&y.id.gvtype===s["a"].POINT){g=y,e.handler.removeInputAction(_),e.handler.removeInputAction(v),e.handler.setInputAction(l,_),e.handler.setInputAction(n,v);break}}}catch(M){f.e(M)}finally{f.f()}if(g&&u)g.id.gvtype===s["a"].POINT?(e.selectedNodeIndex=d.contain(g.id),-1!==e.selectedNodeIndex&&e.highlightedNode(g.id,d)):(e.highlightedNode(g.id,e.editManager.nodeGraphic),e.selectedNodeIndex=-1);else{e.editManager&&e.editManager.stopEdit(),e.removeEventListener(),e.mode="end",e.selectedNodeIndex=-1,e.editManager=void 0,e.tip.visible=!1;var k=new CustomEvent("stopEdit");document.dispatchEvent(k)}}},r=function(){var t=e.manager.get(e.graphicId);if("create"===e.mode&&t){t.stopEdit(),e.graphicType=void 0,e.graphicId=void 0,e.positions=[],e.mode="end",e.tip.visible=!1,e.editManager=void 0;var i=new CustomEvent("stopEdit");document.dispatchEvent(i)}else"ready"===e.mode?e.cancel():"edit"===e.mode&&(e.editManager&&e.editManager.stopEdit(),e.removeEventListener(),e.mode="end",e.selectedNodeIndex=-1,e.editManager=void 0,e.tip.visible=!1);var r=new CustomEvent("stopEdit");document.dispatchEvent(r),e.removeEventListener()},n=function(i){var r=o["a"].pixel2Cartesian(i.endPosition,e.viewer);if(/.*MODEL.*/.test(e._heightReference)){if(!t.scene.pickPositionSupported)return void m.log("This browser does not support pickPosition.");r=t.scene.pickPosition(i.endPosition)}p(r)&&(e.tip.updatePosition(i.endPosition),"create"===e.mode?(e.positions.length>1&&e.manager.get(e.graphicId).popNode(),e.positions.length>0&&e.manager.get(e.graphicId).addNode(r)):"edit"==e.mode&&e.dragging&&-1!==e.selectedNodeIndex&&e.editManager.updateNode(e.selectedNodeIndex,r))},l=function(i){e.handler.setInputAction(d,y);var r,n=t.scene.drillPick(i.position),o=!1,s=c(n);try{for(s.s();!(r=s.n()).done;){var l=r.value;a["d"].isCesiumPoint(l)&&(o=!0)}}catch(h){s.e(h)}finally{s.f()}0!=o&&"edit"===e.mode&&-1!=e.selectedNodeIndex&&(e.dragging=!0,t.scene.screenSpaceCameraController.enableRotate=!1)},d=function(){e.dragging=!1,t.scene.screenSpaceCameraController.enableRotate=!0,e.handler.removeInputAction(y)};this.handler.setInputAction(i,g),this.handler.setInputAction(r,f)}},{key:"rename",value:function(e,t){var i=this.manager.get(e);p(i)&&(i.gvname=t)}},{key:"has",value:function(e){return!!this.manager&&this.manager.has(e)}},{key:"get",value:function(e){if(this.has(e))return this.manager.get(e)}},{key:"cancel",value:function(){var e=this.manager.get(this.graphicId);e&&e.stopEdit(),e&&e.destroy(),this.graphicType=void 0,this.graphicId=void 0,this.positions=[],this.mode="end",this.tip.visible=!1,this.editManager=void 0}},{key:"select",value:function(e,t,i){if(p(t)){var r=this.manager.get(t);r&&(r.show=i)}if(p(e)){var n,a=this.manager.values(),o=c(a);try{for(o.s();!(n=o.n()).done;){var s=n.value;s.gvtype===e&&(s.show=i)}}catch(l){o.e(l)}finally{o.f()}}}},{key:"edit",value:function(e){var t=this,i=t.manager.get(e);if(this.handler.setInputAction((function(e){t.tip.updatePosition(e.endPosition)}),v),t.graphicId=e,p(i)){t.mode="edit",i.startEdit(),t.tip.visible=!0,t.tip.updateText("拖动节点编辑，按del删除."),t.editManager=i;var r=new CustomEvent("startEdit",{detail:{graphicType:t.editManager.type,material:t.editManager.material,width:t.editManager.width,outline:t.editManager.outline,outlineColor:t.editManager.outlineColor,outlineWidth:t.editManager.outlineWidth,heightReference:t.editManager.heightReference}});document.dispatchEvent(r),t.addEventListener()}}},{key:"export",value:function(e){var t,i={type:"FeatureCollection",name:"graphic",crs:{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}},features:[]},r=this.manager.values(),n=c(r);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.type===e&&i.features.push(a.toGeoJson())}}catch(s){n.e(s)}finally{n.f()}var o=new Blob([JSON.stringify(i)],{type:""});Object(l["saveAs"])(o,e+parseInt(u.getTimestamp())+".geojson")}},{key:"import",value:function(e){var t,i,r=this.generateId(),n=[];if(e.geometry.type.toUpperCase()==="LineString".toUpperCase()){i=e.geometry.coordinates;var o,s=c(i);try{for(s.s();!(o=s.n()).done;){var l=o.value;n.push({lon:l[0],lat:l[1],height:l[2]})}}catch(g){s.e(g)}finally{s.f()}try{t=a["f"].fromDegrees(this.viewer,n,e.properties)}catch(f){m.log(f)}}else{if("POLYGON"!==e.geometry.type.toUpperCase())throw new Error("不能识别的数据源.");i=e.geometry.coordinates[0];var d,h=c(i);try{for(h.s();!(d=h.n()).done;){var u=d.value;n.push({lon:u[0],lat:u[1],height:u[2]})}}catch(g){h.e(g)}finally{h.f()}t=a["e"].fromDegrees(this.viewer,n,e.properties)}if(t){t.gvid=r,t.gvname=e.properties.name,this.manager.set(r,t);var p=new CustomEvent("addEvent",{detail:{gvid:t.gvid,gvtype:t.gvtype,gvname:t.gvname||"未命名"}});document.dispatchEvent(p)}return t}},{key:"removeEventListener",value:function(){this.handler.removeInputAction(g),this.handler.removeInputAction(v),this.handler.removeInputAction(f),this.handler.removeInputAction(_),this.handler.removeInputAction(y)}},{key:"removeAll",value:function(){var e,t=this.manager.values(),i=c(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;r.remove(),r.destroy()}}catch(n){i.e(n)}finally{i.f()}this.manager.clear(),this.tip.visible=!1}},{key:"destroy",value:function(){this.activeManager=void 0,this.manager=void 0,this.editManager=void 0,this.removeEventListener(),this.handler.isDestroyed||(this.handler.destroy(),this.handler=void 0)}},{key:"destroyManager",value:function(){var e=this.editManager,t=new CustomEvent("destroyEvent",{detail:{gvid:e?e.gvid:void 0}});e&&("edit"===this.mode?e&&e.stopEdit():(e&&e.destroy(),this.manager.delete(this.graphicId)),this.editManager=void 0),this.graphicId=void 0,this.handler.removeInputAction(v),document.dispatchEvent(t)}}]),e}();t["a"]=k},5040:function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("25ba"),i("5f1c"),i("6ba0"),i("b47f");var r=i("a593"),n=i("6255"),a=i.n(n);i("a675");r["default"].use(a.a);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("layout")],1)},s=[],l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("earthViewer"),i("cesiumDrawViewer",{ref:"marker",attrs:{extendMarkerImage:e.imags}})],1)},c=[],d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"fullSize",staticStyle:{width:"100%",height:"100%"}},[i("div",{staticClass:"full-container",style:e.viewStyle,attrs:{id:"cesiumContainer"}}),e._m(0)])},h=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"loadingOverlay"}},[i("h1",[e._v("Loading...")])])}],u={name:"EarthViewer",viewerProperty:{},props:{viewStyle:{},viewerProperty:{},dropBackground:{default:!1}},components:{},data:function(){return{viewer:null}},computed:{},mounted:function(){var e=window.Cesium,t=this;for(var i in t.viewerDefaultProperty={animation:!1,timeline:!1,geocoder:!1,homeButton:!1,navigationHelpButton:!1,baseLayerPicker:!1,fullscreenElement:"cesiumContainer",fullscreenButton:!1,shouldAnimate:!0,infoBox:!1,selectionIndicator:!1,sceneModePicker:!1,shadows:!1,skyAtmosphere:!1,imageryProvider:new e.UrlTemplateImageryProvider({url:"http://mt1.google.cn/vt/lyrs=s&hl=zh-CN&x={x}&y={y}&z={z}&s=Gali"})},t.viewerProperty)t.viewerDefaultProperty[i]=t.viewerProperty[i];var r=new e.Viewer("cesiumContainer",{animation:!1,timeline:!1,geocoder:!1,homeButton:!1,navigationHelpButton:!1,baseLayerPicker:!1,fullscreenElement:"cesiumContainer",fullscreenButton:!1,shouldAnimate:!0,infoBox:!1,selectionIndicator:!1,sceneModePicker:!1,shadows:!1,skyAtmosphere:!1,imageryProvider:new e.UrlTemplateImageryProvider({url:"http://www.google.cn/maps/vt?lyrs=s@800&x={x}&y={y}&z={z}",tilingScheme:new e.WebMercatorTilingScheme,minimumLevel:1,maximumLevel:20})});window.cesiumViewer=r;var n=document.getElementsByClassName("cesium-widget-credits");n[0].parentElement.removeChild(n[0]),r.cesiumWidget.screenSpaceEventHandler.removeInputAction(e.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),r.scene.postProcessStages.fxaa.enabled=!1,r.camera.flyTo({destination:e.Cartesian3.fromDegrees(116.4,39.9,15e6),duration:0})},methods:{}},p=u,m=(i("1890"),i("a01b"),i("5d22")),g=Object(m["a"])(p,d,h,!1,null,"321f52b7",null),f=g.exports,v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],attrs:{id:"drawtoolPanel"}},[i("el-container",[i("el-header",{attrs:{id:"drawtoolHead"}},[i("span",[e._v("基础标绘")]),i("span",{staticClass:"closebtn iconfont icondelete",on:{click:function(t){return e.$emit("closeEvent")}}})]),i("el-main",{staticClass:"graphic-draw-main"},[i("ul",[i("li",[i("i",{staticClass:"iconfont iconmarker icon-class",class:{"selected-graphic":e.menuSelected["MARKER"]},attrs:{title:"添加标记"},on:{click:function(t){return e.menuAction("MARKER")}}}),i("span",{class:{"selected-graphic":e.menuSelected["MARKER"]},on:{click:function(t){return e.menuAction("MARKER")}}},[e._v("标记")])]),i("li",[i("i",{staticClass:"iconfont iconpolyline icon-class",class:{"selected-graphic":e.menuSelected["POLYLINE"]},attrs:{title:"添加线段"},on:{click:function(t){return e.menuAction("POLYLINE")}}}),i("span",{class:{"selected-graphic":e.menuSelected["POLYLINE"]},on:{click:function(t){return e.menuAction("POLYLINE")}}},[e._v("折线")])]),i("li",[i("i",{staticClass:"iconfont iconpolygon icon-class",class:{"selected-graphic":e.menuSelected["POLYGON"]},attrs:{title:"添加多边形"},on:{click:function(t){return e.menuAction("POLYGON")}}}),i("span",{class:{"selected-graphic":e.menuSelected["POLYGON"]},on:{click:function(t){return e.menuAction("POLYGON")}}},[e._v("多边形")])]),i("li",[i("i",{staticClass:"iconfont iconlabel icon-class",class:{"selected-graphic":e.menuSelected["LABEL"]},attrs:{title:"添加文字"},on:{click:function(t){return e.menuAction("LABEL")}}}),i("span",{class:{"selected-graphic":e.menuSelected["LABEL"]},on:{click:function(t){return e.menuAction("LABEL")}}},[e._v("文字")])]),e.extendMarkerModel.length?i("li",[i("i",{staticClass:"iconfont iconmodel icon-class",class:{"selected-graphic":e.menuSelected["MODEL"]},attrs:{title:"添加模型"},on:{click:function(t){return e.menuAction("MODEL")}}}),i("span",{class:{"selected-graphic":e.menuSelected["MODEL"]},on:{click:function(t){return e.menuAction("MODEL")}}},[e._v("模型")])]):e._e(),i("li",[i("i",{staticClass:"iconfont iconlayer icon-class",class:{"selected-graphic":e.layerManagerVisible},attrs:{title:"图层管理"},on:{click:function(t){e.layerManagerVisible=!e.layerManagerVisible}}}),i("span",{class:{"selected-graphic":e.layerManagerVisible},on:{click:function(t){e.layerManagerVisible=!e.layerManagerVisible}}},[e._v("清单")])])])])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.editMode,expression:"editMode"}],staticClass:"graphic-edit"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.menuSelected["MARKER"],expression:"menuSelected['MARKER']"}],staticClass:"marker-edit-class edit-class"},[i("el-color-picker",{attrs:{id:"markerColor","show-alpha":"",size:"mini"},model:{value:e.markerColor,callback:function(t){e.markerColor=t},expression:"markerColor"}}),i("el-select",{attrs:{size:"mini","allow-create":"",filterable:"",title:"字号","default-first-option":"",placeholder:"请选择"},model:{value:e.fontSize,callback:function(t){e.fontSize=t},expression:"fontSize"}},e._l(e.fontSizeList,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1),i("el-popover",{attrs:{placement:"top",width:"160"},model:{value:e.markerOptionsVisible,callback:function(t){e.markerOptionsVisible=t},expression:"markerOptionsVisible"}},[i("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请在此定义LabelGraphic"},model:{value:e.markerOption,callback:function(t){e.markerOption=t},expression:"markerOption"}}),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.markerOption="",e.markerOptionsVisible=!1}}},[e._v("取消")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.setLabel}},[e._v("确定")])],1)],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.menuSelected["POLYLINE"],expression:"menuSelected['POLYLINE']"}],staticClass:"polyline-edit-class edit-class"},[i("el-color-picker",{attrs:{title:"颜色",id:"lineColor","show-alpha":"",size:"mini"},model:{value:e.lineColor,callback:function(t){e.lineColor=t},expression:"lineColor"}}),i("el-select",{staticClass:"width-selector",attrs:{size:"mini",title:"线宽","allow-create":"",filterable:"","default-first-option":"",placeholder:"请选择"},model:{value:e.lineWidth,callback:function(t){e.lineWidth=t},expression:"lineWidth"}},e._l(e.lineWidthList,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1),i("el-select",{staticClass:"style-selector",attrs:{size:"mini",title:"直线样式","default-first-option":"",placeholder:"请选择"},model:{value:e.lineStyle,callback:function(t){e.lineStyle=t},expression:"lineStyle"}},e._l(e.lineStyleList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1),i("el-select",{staticClass:"type-selector",attrs:{size:"mini",title:"直线类型","default-first-option":"",placeholder:"请选择"},model:{value:e.graphicHeight,callback:function(t){e.graphicHeight=t},expression:"graphicHeight"}},e._l(e.heightList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.menuSelected["POLYGON"],expression:"menuSelected['POLYGON']"}],staticClass:"polygon-edit-class edit-class"},[i("el-color-picker",{attrs:{title:"填充色",id:"polygonColor","show-alpha":"",size:"mini"},model:{value:e.polygonColor,callback:function(t){e.polygonColor=t},expression:"polygonColor"}}),i("el-select",{staticClass:"type-selector",attrs:{size:"mini",title:"多边形类型","default-first-option":"",placeholder:"请选择"},model:{value:e.graphicHeight,callback:function(t){e.graphicHeight=t},expression:"graphicHeight"}},e._l(e.heightList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1),i("i",{staticClass:"iconfont iconoutline border-btn",class:{"outline-selected":e.outline},attrs:{title:"边框"},on:{click:function(t){e.outline=!e.outline}}}),i("el-color-picker",{directives:[{name:"show",rawName:"v-show",value:e.outline,expression:"outline"}],attrs:{title:"边框充色",id:"outlineColor","show-alpha":"",size:"mini"},model:{value:e.outlineColor,callback:function(t){e.outlineColor=t},expression:"outlineColor"}}),i("el-select",{directives:[{name:"show",rawName:"v-show",value:e.outline,expression:"outline"}],staticClass:"width-selector",attrs:{size:"mini",title:"边框宽度","allow-create":"",filterable:"","default-first-option":"",placeholder:"请选择"},model:{value:e.outlineWidth,callback:function(t){e.outlineWidth=t},expression:"outlineWidth"}},e._l(e.lineWidthList,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.menuSelected["LABEL"],expression:"menuSelected['LABEL']"}],staticClass:"label-edit-class edit-class"},[i("el-select",{staticClass:"font-selector",attrs:{"allow-create":"",filterable:"",size:"mini",title:"字体","default-first-option":"",placeholder:"请选择"},model:{value:e.fontFamily,callback:function(t){e.fontFamily=t},expression:"fontFamily"}},e._l(e.fontList,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1),i("el-select",{staticClass:"size-selector",attrs:{size:"mini","allow-create":"",filterable:"",title:"字号","default-first-option":"",placeholder:"请选择"},model:{value:e.fontSize,callback:function(t){e.fontSize=t},expression:"fontSize"}},e._l(e.fontSizeList,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1),i("el-color-picker",{attrs:{title:"颜色",id:"labelColor","show-alpha":"",size:"mini"},model:{value:e.markerColor,callback:function(t){e.markerColor=t},expression:"markerColor"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.menuSelected["MODEL"],expression:"menuSelected['MODEL']"}],staticClass:"model-edit-class edit-class"},[i("el-popover",{attrs:{placement:"bottom",id:"model-select",width:"160"},model:{value:e.modelSelectPanelvisible,callback:function(t){e.modelSelectPanelvisible=t},expression:"modelSelectPanelvisible"}},[i("div",{staticClass:"model-select-panel"},e._l(e.extendMarkerModel,(function(t){return i("img",{key:t.id,attrs:{title:t.name,src:e.modelThumb(t),onerror:e.defaultImage},on:{click:function(i){return e.selectModel(t)}}})})),0),i("i",{staticClass:"iconfont iconmodel model-selector-trigger",attrs:{slot:"reference",title:"选择模型"},slot:"reference"})]),i("el-select",{attrs:{size:"mini",title:"模式","default-first-option":"",placeholder:"请选择"},model:{value:e.modelMode,callback:function(t){e.modelMode=t},expression:"modelMode"}},e._l(e.modelModeList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1),i("el-color-picker",{attrs:{title:"颜色",id:"modelColor","show-alpha":"",size:"mini"},model:{value:e.modelColor,callback:function(t){e.modelColor=t},expression:"modelColor"}}),i("el-slider",{directives:[{name:"show",rawName:"v-show",value:"Mix"===e.modelMode,expression:"modelMode==='Mix'"}],attrs:{title:"混合度",min:0,max:1,step:.1,"show-tooltip":!0},model:{value:e.modelMixed,callback:function(t){e.modelMixed=t},expression:"modelMixed"}})],1)]),i("MarkerViewer",{ref:"markerManager",attrs:{attachment:e.attachment,extendImage:e.extendMarkerImage},on:{deleteEvent:e.deleteMarker,editEvent:e.editMarker,addEvent:e.addMarker,updateEvent:e.updateMarker}}),i("layerManager",{directives:[{name:"show",rawName:"v-show",value:e.layerManagerVisible,expression:"layerManagerVisible"}],ref:"layerManager",staticClass:"layer-manager-class",class:{"edit-layer-manager-class":e.editMode},attrs:{tools:e.tools},on:{locate:e.locateGraphic,edit:e.editGraphic,delete:e.deleteGraphic,rename:e.renameGraphic,select:e.selectGraphic,clear:e.clearGraphic,close:e.closeLayerManager,import:e.importGraphic,export:e.exportGraphic}}),i("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"file",id:"graphicuploadhandler",accept:".geojson, .shp"},on:{change:e.importfp}})],1)},_=[],y=i("2b56"),k=y["a"],M=(i("3762"),i("45ea"),Object(m["a"])(k,v,_,!1,null,"4e74bf8b",null)),b=M.exports,w=window.Cesium,E={data:function(){return{drawHelper:"",viewerMounted:!1,drawviewerShow:!0,imags:["./static/images/markers/1.png","./static/images/markers/2.png","./static/images/markers/3.png","./static/images/markers/4.png","./static/images/markers/5.png","./static/images/markers/6.png","./static/images/markers/7.png","./static/images/markers/8.png","./static/images/markers/5.png","./static/images/markers/6.png"],model:[{id:"model0",name:"木塔",url:"static/model/Wood_Tower.gltf"},{id:"model1",name:"人",url:"static/model/Cesium_Man.gltf"}]}},components:{earthViewer:f,cesiumDrawViewer:b},props:{},computed:{},beforeMount:function(){},mounted:function(){var e=window.cesiumViewer,t=new w.Cesium3DTileset({url:"static/Photogrammetry/tileset.json"});this.$refs.marker.init(e),t.readyPromise.then((function(t){e.scene.primitives.add(t)}))},methods:{},watch:{}},O=E,C=(i("9a8d"),Object(m["a"])(O,l,c,!1,null,"7f322c4f",null)),P=C.exports,A={name:"app",components:{layout:P}},L=A,D=(i("5c0b"),Object(m["a"])(L,o,s,!1,null,null,null)),I=D.exports;i("3a10");r["default"].config.productionTip=!1,new r["default"]({render:function(e){return e(I)}}).$mount("#app")},"5c0b":function(e,t,i){"use strict";i("6c5c")},"5eae":function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"layer-manager-box",attrs:{id:"layer-manager-box"}},[i("div",{staticClass:"layer-manager-header",attrs:{id:"layer-manager-header"}},[i("i",{staticClass:"iconfont iconclose1"}),i("span",[e._v("标绘清单")]),i("span",{staticClass:"closebtn iconfont iconclose",on:{click:e.closeLayerManaer}})]),i("div",{staticClass:"layer-manager-tools"},[i("span",{staticClass:"el-dropdown-link",on:{click:e.importHandler}},[e._m(0)]),i("el-dropdown",{attrs:{trigger:"click"},on:{command:e.exportHandler}},[i("span",{staticClass:"el-dropdown-link"},[i("i",{staticClass:"iconfont iconexport action-icon-class"},[i("span",[e._v("导出")])])]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{staticClass:"iconfont iconmarker",attrs:{command:"MARKER"}},[e._v("标记")]),i("el-dropdown-item",{staticClass:"iconfont iconpolyline",attrs:{command:"POLYLINE"}},[e._v("线")]),i("el-dropdown-item",{staticClass:"iconfont iconpolygon",attrs:{command:"POLYGON"}},[e._v("多边形")]),i("el-dropdown-item",{staticClass:"iconfont iconlabel",attrs:{command:"LABEL"}},[e._v("书签")])],1)],1),i("i",{staticClass:"iconfont iconremove action-icon-last-class",on:{click:e.removeAll}},[i("span",[e._v("清空")])])],1),i("div",{staticClass:"graphic-draw-layer-manager-class",attrs:{id:"layerTree"}},[i("el-tree",{ref:"tree",attrs:{data:e.json,"show-checkbox":"","node-key":"id","default-expanded-keys":["marker","polyline","polygon"]},on:{check:e.checkAction},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var r=t.data;return i("span",{staticClass:"custom-tree-node"},[i("i",{staticClass:"action-item",class:r.icon}),r.edit?i("el-input",{nativeOn:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.renameAction(r)}},model:{value:e.newName,callback:function(t){e.newName=t},expression:"newName"}}):i("span",{staticClass:"node-name action-item"},[e._v(e._s(r.text))]),r.children?e._e():i("span",{staticClass:"action-class"},e._l(e.tools,(function(e){return i("i",{key:e.id,staticClass:"iconfont action-item",class:[e.icon],attrs:{title:e.text},on:{click:function(t){return e.action(r)}}})})),0)],1)}}])})],1)])},n=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("i",{staticClass:"iconfont iconimport action-icon-class"},[i("span",[e._v("导入")])])}];i("9f60"),i("94f0"),i("2843"),i("a450"),i("4057"),i("aa18"),i("982e"),i("1bc7"),i("0c84"),i("3e38");function a(e,t){var i;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=o(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==i.return||i.return()}finally{if(l)throw a}}}}function o(e,t){if(e){if("string"===typeof e)return s(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var l={data:function(){return{markerTree:new Map,polylineTree:new Map,polygonTree:new Map,labelTree:new Map,modelTree:new Map,renameNodeStatus:!1,checked:[],newName:"",json:[{id:"marker",text:"标记",type:"marker",icon:"iconfont icon-lujing",children:[]},{id:"polyline",text:"线",type:"polyline",icon:"iconfont iconpolyline",children:[]},{id:"polygon",text:"多边形",type:"polygon",icon:"iconfont iconpolygon",children:[]},{id:"label",text:"文字",type:"label",icon:"iconfont iconlabel",children:[]},{id:"model",icon:"iconfont iconmodel",text:"模型",type:"model",children:[]}],defaultTools:{locate:{text:"定位",icon:"iconlocate",action:this.locate},rename:{text:"重命名",icon:"iconrename",action:this.rename},edit:{text:"编辑",icon:"iconedit",action:this.edit},drop:{text:"删除",icon:"iconremove",action:this.drop}}}},props:{tools:{default:function(){return this.defaultTools}}},mounted:function(){},computed:{},methods:{checkAction:function(e,t){t.checkedKeys.includes(e.id)?this.$emit("select",e.id,!0):this.$emit("select",e.id,!1)},locate:function(e){this.$emit("locate",e.id)},rename:function(e,t,i){if(e)this.$set(e,"edit",!0),this.newName=e.text;else{var r,n=a(this.json);try{for(n.s();!(r=n.n()).done;){var o,s=r.value,l=a(s.children);try{for(l.s();!(o=l.n()).done;){var c=o.value;c.id===t&&(c.text=i)}}catch(d){l.e(d)}finally{l.f()}}}catch(d){n.e(d)}finally{n.f()}}},renameAction:function(e){e.edit=!1,this.$emit("rename",e.id,this.newName),e.text=this.newName},edit:function(e){this.$emit("edit",e.id)},drop:function(e){var t=this;if(e){this.$emit("delete",e.id);var i=this.checked.indexOf(e.id);e.id>-1&&this.checked.splice(i,1),this.$nextTick((function(){t.$refs.tree.setCheckedKeys(t.checked)}));var r,n=a(this.json);try{for(n.s();!(r=n.n()).done;){var o,s=r.value,l=0,c=a(s.children);try{for(c.s();!(o=c.n()).done;){var d=o.value;if(d.id===e.id){s.children.splice(l,1);break}l++}}catch(h){c.e(h)}finally{c.f()}}}catch(h){n.e(h)}finally{n.f()}}},removeAll:function(){var e=this;this.$emit("clear");var t,i=a(this.json);try{for(i.s();!(t=i.n()).done;){var r=t.value;r.children.splice(0)}}catch(n){i.e(n)}finally{i.f()}this.$nextTick((function(){e.$refs.tree.setCheckedKeys([])}))},insertLayer:function(e,t,i){var r=this;i=i||"未命名",this.json[e].children.push({id:t,text:i,icon:"el-icon-document"}),this.checked.push(t),this.$nextTick((function(){r.$refs.tree.setCheckedKeys(r.checked)}))},exportHandler:function(e){this.$emit("export",e)},importHandler:function(e){this.$emit("import",e)},closeLayerManaer:function(){this.$emit("close")}}},c=l,d=(i("24fd"),i("a293"),i("5d22")),h=Object(d["a"])(c,r,n,!1,null,"454934da",null);t["a"]=h.exports},"6c5c":function(e,t,i){},"6e36":function(e,t,i){},8250:function(e,t,i){},9944:function(e,t,i){"use strict";i.d(t,"e",(function(){return g})),i.d(t,"a",(function(){return m})),i.d(t,"b",(function(){return w})),i.d(t,"c",(function(){return b}));i("4057"),i("7afe");var r=i("1778"),n=i("758b"),a=i("1706"),o=i("abbc"),s=i("fffd"),l=i("0029"),c=(i("b76b"),i("fc02"),i("a336")),d=i.n(c);function h(e){var t=u();return function(){var i,r=Object(a["a"])(e);if(t){var o=Object(a["a"])(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Object(n["a"])(this,i)}}function u(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var p=window.Cesium,m=function(){function e(){}return e.cartesian2Pixel=function(e,t){return p.SceneTransforms.wgs84ToWindowCoordinates(t.scene,e)},e.pixel2Cartesian=function(t,i){return i.terrainProvider instanceof p.EllipsoidTerrainProvider?e.pixel2Cartesian1(t,i):e.pixel2Cartesian2(t,i)},e.pixel2Cartesian1=function(e,t){var i=t.camera.pickEllipsoid(e,t.scene.globe.ellipsoid);return i},e.pixel2Cartesian2=function(e,t){var i=t.camera.getPickRay(e),r=t.scene.globe.pick(i,t.scene);return r},e.cartesian2Radians=function(e,t){var i=t.scene.globe.ellipsoid||p.Ellipsoid.WGS84,r=p.Cartographic.fromCartesian(e,i),n=r.longitude,a=r.latitude,o=r.height;return{lon:n,lat:a,height:o}},e.cartesian2Degrees=function(t,i){var r=e.cartesian2Radians(t,i),n=p.Math.toDegrees(r.lon),a=p.Math.toDegrees(r.lat),o=r.height;return{lon:n,lat:a,height:o}},e.degrees2Cartesian=function(e){var t=p.Cartesian3.fromDegrees(e.lon,e.lat,e.height);return t},e.radians2Cartesian=function(e){return p.Cartesian3.fromRadians(e.lon,e.lat,e.height)},e.pixel2Degrees=function(t,i){var r=e.pixel2Cartesian(t,i);if(p.defined(r))return e.cartesian2Degrees(r,i)},e.pixel2Radians=function(t,i){var r=e.pixel2Cartesian(t,i);if(p.defined(r))return e.cartesian2Radians(r,i)},e.toDegrees=function(t,i){return t instanceof p.Cartesian3?e.cartesian2Degrees(t,i):t instanceof p.Cartesian2?e.pixel2Degrees(t,i):void 0},e.toRadians=function(t,i){return t instanceof p.Cartesian3?e.cartesian2Radians(t,i):t instanceof p.Cartesian2?e.pixel2Radians(t,i):void 0},e.toPixel=function(t,i){if(t instanceof p.Cartesian)return e.cartesian2Pixel(t,i)},e}();function g(e,t){if(!d()("#"+e))throw new Error("请指定要操作的元素");t||(t=e),d()("#"+t).mousedown((function(i){d()("#"+t).css("cursor","move");var r=d()("#"+e).position(),n=i.pageX-r.left,a=i.pageY-r.top;d()(document).bind("mousemove",(function(i){d()("#"+t).css("cursor","move"),d()("#"+e).stop();var r=i.pageX-n,o=i.pageY-a;d()("#"+e).animate({left:r+"px",top:o+"px"},10)}))})),d()(document).mouseup((function(){d()("#"+t).css("cursor","default"),d()(this).unbind("mousemove")}))}function f(e){var t={},i=e.scene,r=i.globe.ellipsoid,n=i.canvas,a=e.camera.pickEllipsoid(new p.Cartesian2(0,0),r),o=e.camera.pickEllipsoid(new p.Cartesian2(n.width,n.height),r);if(a&&o){var s=r.cartesianToCartographic(a),l=r.cartesianToCartographic(o);t.xmin=p.Math.toDegrees(s.longitude),t.ymax=p.Math.toDegrees(s.latitude),t.xmax=p.Math.toDegrees(l.longitude),t.ymin=p.Math.toDegrees(l.latitude)}else if(!a&&o){var c=null,d=0;do{d<=n.height?d+=10:n.height,c=e.camera.pickEllipsoid(new p.Cartesian2(0,d),r)}while(!c);var h=r.cartesianToCartographic(c),u=r.cartesianToCartographic(o);t.xmin=p.Math.toDegrees(h.longitude),t.ymax=p.Math.toDegrees(h.latitude),t.xmax=p.Math.toDegrees(u.longitude),t.ymin=p.Math.toDegrees(u.latitude)}return t.height=Math.ceil(e.camera.positionCartographic.height),t}var v=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new p.Cartesian3,r=e.scene,n=e.camera,a=new p.Cartographic,o=new p.Ray;if(r.mode!==p.SceneMode.MORPHING&&(p.defined(e.trackedEntity)?i=e.trackedEntity.position.getValue(e.clock.currentTime,i):(o.origin=n.positionWC,o.direction=n.directionWC,i=r.globe.pick(o,r,i)),p.defined(i)))return r.mode===p.SceneMode.SCENE2D||r.mode===p.SceneMode.COLUMBUS_VIEW?(i=n.worldToCameraCoordinatesPoint(i,i),t&&(i=r.globe.ellipsoid.cartographicToCartesian(r.mapProjection.unproject(i,a),i))):t||(i=n.worldToCameraCoordinatesPoint(i,i)),i},_=function(e,t){e.render(),t&&""!=t||(t=(new Date).toLocaleString()+".png");var i=t.split(".")[1];y(t,e.scene.canvas.toDataURL("image/%s"%i))},y=function(e,t){var i=document.createElement("a"),r=a(t),n=document.createEvent("HTMLEvents");function a(e){for(var t=e.split(";base64,"),i=t[0].split(":")[1],r=window.atob(t[1]),n=r.length,a=new Uint8Array(n),o=0;o<n;++o)a[o]=r.charCodeAt(o);return new Blob([a],{type:i})}n.initEvent("click",!0,!0),i.download=e,i.href=URL.createObjectURL(r),i.click()},k=function(e,t){e.response?t(e.response.data):e.request?t(e.request):t(e.message)},M=function(){function e(t,i,r){Object(s["a"])(this,e);var n=document.createElement("div");n.id=i||"cursor-tip",n.className="cursor-tip-class",n.innerHTML=t,document.body.appendChild(n),this.ele=n,this._visible=!0;var a=this;r instanceof p.Viewer&&r.screenSpaceEventHandler.setInputAction((function(e){a.updatePosition(e.endPosition)}),p.ScreenSpaceEventType.MOUSE_MOVE)}return Object(l["a"])(e,[{key:"updatePosition",value:function(e){this.ele.style.left=e.x+10+"px",this.ele.style.top=e.y+10+"px"}},{key:"updateText",value:function(e){this.ele.innerHTML=e}},{key:"visible",get:function(){return this._visible},set:function(e){this._visible=e,this.ele.style.display=e?"block":"none"}}]),e}();function b(e){if(e instanceof p.Viewer===!1)throw new E(e+"不是一个有效的Cesium Viewer对象")}function w(e,t){if(e&&e._viewer instanceof p.Viewer===!1)throw new E("组件尚未初始化"+e._uid);if(!e&&!window.Cesium.defined(t))throw new E("组件尚未初始化")}var E=function(e){Object(r["a"])(i,e);var t=h(i);function i(e){var r;return Object(s["a"])(this,i),r=t.call(this,e),r.name="GVError",r}return i}(Object(o["a"])(Error));function O(e,t){return new p.EllipsoidalOccluder(p.Ellipsoid.WGS84,t.camera.position).isPointVisible(e)}t["d"]={moveDiv:g,errroCatch:k,currentExtent:f,viewCenter:v,saveCurViewerImage:_,downloadFile:y,CVT:m,CursorTip:M,pointVisibilityOnEarth:O}},"9a8d":function(e,t,i){"use strict";i("f9a9")},a01b:function(e,t,i){"use strict";i("cf00")},a293:function(e,t,i){"use strict";i("6e36")},cc5e:function(e,t,i){},cd53:function(e,t,i){"use strict";i.d(t,"d",(function(){return O})),i.d(t,"f",(function(){return C})),i.d(t,"e",(function(){return P})),i.d(t,"b",(function(){return A})),i.d(t,"a",(function(){return E})),i.d(t,"c",(function(){return L}));i("ac67"),i("7afe"),i("9f60"),i("94f0"),i("0c84"),i("2843"),i("a450"),i("4057");var r=i("547b"),n=(i("1bc7"),i("32ea"),i("cf8a")),a=i("1778"),o=i("758b"),s=i("1706"),l=i("a07a"),c=i("fffd"),d=i("0029"),h=i("4ab0"),u=i("9944");function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(Object(i),!0).forEach((function(t){Object(l["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function g(e){var t=f();return function(){var i,r=Object(s["a"])(e);if(t){var n=Object(s["a"])(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return Object(o["a"])(this,i)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e,t){var i;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=_(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function _(e,t){if(e){if("string"===typeof e)return y(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var k=window.Cesium,M=k.defined,b=window.console,w=function(){function e(t){if(Object(c["a"])(this,e),t instanceof k.Viewer===!1)throw new Error("viewer不是一个有效的Cesium Viewer对象.");this.viewer=t,this._type=void 0,this._gvtype=void 0,this._gvid=void 0,this._name=void 0,this._attachment=[]}return Object(d["a"])(e,[{key:"attachment",get:function(){return this._attachment},set:function(e){this._attachment=e}},{key:"type",get:function(){return this._type}},{key:"gvtype",get:function(){return this._gvtype},set:function(e){this._gvtype=e}},{key:"gvid",get:function(){return this._gvid},set:function(e){this._gvid=e,this.graphic&&(this.graphic.gvid=this._gvid)}},{key:"gvname",get:function(){return this._name},set:function(e){this._name=e,this.graphic&&(this.graphic.gvname=this.gvname,this.graphic.label&&(this.graphic.label.text=e))}},{key:"show",get:function(){return!!this.graphic&&this.graphic.show},set:function(e){this.graphic&&(this.graphic.show=e)}},{key:"zoomTo",value:function(){this.graphic&&this.viewer.flyTo(this.graphic)}},{key:"coordinates",value:function(){if(this.position instanceof k.Cartesian3){var e=u["a"].cartesian2Degrees(this.position,this.viewer);return[e.lon,e.lat,e.height]}if(this.positions instanceof Array){var t,i=[],r=v(this.positions);try{for(r.s();!(t=r.n()).done;){var n=t.value,a=u["a"].cartesian2Degrees(n,this.viewer);i.push([a.lon,a.lat,a.height])}}catch(o){r.e(o)}finally{r.f()}return"POLYLINE"===this.type?i:[i]}}},{key:"toGeoJson",value:function(){var e={MARKER:"Point",POLYLINE:"LineString",POLYGON:"POLYGON",LABEL:"Point"};return{type:"Feature",properties:{name:this.gvname,gvtype:this.gvtype},geometry:{type:e[this.type],coordinates:this.coordinates()}}}}]),e}(),E=function(e){Object(a["a"])(i,e);var t=g(i);function i(e,r){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.defaultLabelStyle;Object(c["a"])(this,i),a=t.call(this,e),a.viewer=e,a._type="MARKER",a.gvtype=h["a"].MARKER,a.position=r.position,r.image=r.image||i.defaultStyle.image,o.text=r.label,a.labelOptions=o;var s=Object(n["a"])(a);return a.options={gvname:a._name,gvtype:a.gvtype,gvid:a.gvid,position:s.position,billboard:r,label:o},a.graphic=void 0,a.name="",a.description="",a.create(),a}return Object(d["a"])(i,[{key:"text",get:function(){return this.graphic.label.text},set:function(e){this.graphic.label.text=e,this.gvname=e}},{key:"font",get:function(){return this.graphic.label.font.getValue()},set:function(e){this.graphic.label.font=e}},{key:"color",get:function(){return this.graphic.label.fillColor},set:function(e){this.graphic.label.fillColor=e}},{key:"setLabel",value:function(e){if(this.graphic)for(var t=Object.keys(e),i=0,r=t;i<r.length;i++){var n=r[i];this.graphic.label[n]=e[n]}}},{key:"create",value:function(){this.graphic=this.viewer.entities.add(this.options)}},{key:"remove",value:function(){this.viewer&&this.viewer.entities.remove(this.graphic),this.graphic=void 0}},{key:"updateText",value:function(e,t){this.graphic&&(this.graphic.label.text=e,this.name=e,this.description=t,this.gvname=e)}},{key:"updateImage",value:function(e){this.graphic&&(void 0===e?(this.graphic.label.pixelOffset=void 0,this.graphic.billboard.image=void 0):(this.graphic.label.pixelOffset=this.labelOptions.pixelOffset,this.graphic.billboard.image=e))}},{key:"updatePosition",value:function(e){this.position=e}},{key:"stopEdit",value:function(){this.graphic&&this.graphic.position&&(this.graphic.position=new k.ConstantProperty(this.position))}},{key:"startEdit",value:function(){var e=this;this.graphic&&(this.graphic.position=new k.CallbackProperty((function(){return e.position}),!1))}},{key:"destroy",value:function(){this.remove(),this.viewer=void 0,this.options=void 0,this.position=void 0}}],[{key:"fromDegrees",value:function(e,t){var r=i.defaultStyle;return r.position=k.Cartesian3.fromDegrees(t.lon,t.lat,t.height),new i(e,r)}},{key:"fromRadians",value:function(e,t){var r=i.defaultStyle;return r.position=k.Cartesian3.fromRadians(t.lon,t.lat,t.height),new i(e,r)}}]),i}(w);Object(l["a"])(E,"defaultStyle",{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkJEN0VBRDA0MzJCRTExRUE5MjY2QTg3OUVFNjUyQzhCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkJEN0VBRDA1MzJCRTExRUE5MjY2QTg3OUVFNjUyQzhCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QkQ3RUFEMDIzMkJFMTFFQTkyNjZBODc5RUU2NTJDOEIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QkQ3RUFEMDMzMkJFMTFFQTkyNjZBODc5RUU2NTJDOEIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6qzlgwAAADR0lEQVR42uxXTUhUURQ+88aZ93JSZyiDCCkt+0VLtGzRn/QntotMoqBEol1Ui9JVtNCsoKJNSFgQREjRKiXF/mxToIQK2YBZIRKlaE1pb+Y5M33n+dRJfTN3ZoLZdOG7986dc75z5v6cc8YSDAYpkU2iBLeEO5AUpfxy4BCwHVgLLDTWh4B3wEvgPvBBlNAy1x1w3fP89XnkcOoyDJeBA6wTgZMJHwJnwfNpBk/0DkCpFEM9kKL6iR591qixX6OukQB9+x3QZRbNkyjXJdG+DBvtX2ojxaov/wQqwPUgZgegUIHhFss19o9TVYdK/aOBsD8/wyHRxXwFziRN7sZx8NWbOWB6CSFchKGOjZ9/q9KRtrGIxrmxDMuyjnFcdQaX+B3g7QZ6gCWXur1U2+WN6YZX5sp0Lkfm6YBxaT2iO3CKjbcP+elKtzfmJ8a6zMFcwGnRHVB4J/mJFbeM0ptBf1zvvDDdSk/2OCafagagRtqBvWy8c9gft3FuzMFcRswoFjmC3dy1DIybktqhVVugUF9pCn0EeG4PE1NDuHaJOFDA3auv5r/+Qp5CJ1bZyWW3kBPgedV62VQ+hGujiANZ3Lk95g6UZdlmrR1dYTeVD+HKFHHAyd2w+u/SdAiXS8QBXVpJMg/5DX3arLW7vZqpvGyd4lJFHOCsRuuc5reKo1yd20fffUEdPK/pVE3lc1xTXL0i6fgxsKEs02b6DH2IyJXtqg6RdjDTFsodMRAtBvq8AVJ2NP2i9z8CcZ3/6jSJXpTMJ1nSt58v+JdIR8AC1VCg21uSKdVmidk469aDQ56wUj3TeLhkxHvWCmx7jWMoez5GHi0YtfGGomTanK4XB21GENKEkhHyt2ZUP24maC120Mo08fKRZVnHMO5mLoNTvB6AwiCGnZyWs1MlegbC8mx72HqMvzuGgMSyrIPWzRwGV/RVMRQ5j2/laOpAXLi6SaEmZLb8BdZZsrzG310rVMgxEUOesq7BEXdRynG2Bjij66BrQol2o2eiVji5RqYSlGCW6UB2nesR8PjiLkpnEHCqvmM8VTJ5QeXQbzbRnyPuwoEo4QRuAv7gdPMba85o+WJxYBJ5QDPQYsxj4rH8/3OaaAf+CDAAVvn1VEy/MOwAAAAASUVORK5CYII=",verticalOrigin:k.VerticalOrigin.BASELINE}),Object(l["a"])(E,"defaultLabelStyle",{font:"28px sans-serif",fillColor:k.Color.WHITE,showBackground:!0,style:k.LabelStyle.FILL_AND_OUTLINE,verticalOrigin:k.VerticalOrigin.BOTTOM,pixelOffset:new k.Cartesian2(20,-30),heightReference:k.HeightReference.NONE});var O=function(e){Object(a["a"])(i,e);var t=g(i);function i(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.defaultStyle;Object(c["a"])(this,i),r=t.call(this,e),r._type="POINT",r.gvtype=h["a"].POINT,r.positions=a.positions;var o=Object(n["a"])(r);if(r.positions instanceof k.Cartesian3)r.options={gvname:r._name,gvid:r._gvid,gvtype:r._gvtype,position:new k.CallbackProperty((function(){return o.positions}),!1),point:a};else{if(!(r.positions instanceof Array))throw new Error("options参数错误.");r.options=[];for(var s=function(e){var t={gvname:r._name,gvid:r._gvid,gvtype:r._gvtype,position:new k.CallbackProperty((function(){return o.positions[e]}),!1),point:a};r.options.push(t)},l=0;l<r.positions.length;l++)s(l)}return r.graphic=[],r.create(),r}return Object(d["a"])(i,[{key:"create",value:function(){var e=this;this.options instanceof Array?this.graphic=this.options.map((function(t){var i=e.viewer.entities.add(t);return i})):this.graphic=this.viewer.entities.add(this.options)}},{key:"remove",value:function(){var e=this;this.graphic instanceof Array?this.graphic.map((function(t){e.viewer.entities.remove(t)})):this.viewer.entities.remove(this.graphic),this.graphic=void 0}},{key:"startEdit",value:function(){var e=this;if(this.graphic instanceof k.Entity)this.graphic.position=new k.CallbackProperty((function(){return e.positions}),!1);else if(this.graphic instanceof Array)for(var t=this.graphic.length,i=function(t){e.graphic[t].position=new k.CallbackProperty((function(){return e.positions[t]}),!1)},r=0;r<t;r++)i(r)}},{key:"stopEdit",value:function(){this.graphic instanceof k.Entity?this.graphic.position=this.graphic.position.getValue():this.graphic instanceof Array&&(this.graphic=this.graphic.map((function(e){return e.position=e.position.getValue()})))}},{key:"contain",value:function(e){if(this.graphic instanceof k.Cartesian3)return this.graphic===e;if(this.graphic instanceof Array)for(var t=this.graphic.length,i=0;i<t;i++)if(this.graphic[i]===e)return i;return-1}},{key:"destroy",value:function(){this.remove(),this.viewer=void 0,this.options=void 0,this.graphic=void 0}}],[{key:"equalPosition",value:function(e,t){if(!(e instanceof k.Cartesian3&&t instanceof k.Cartesian3))throw new Error("node不是一个有效的Cartesian3对象");return e.x===t.x&&e.y===t.y&&e.z===t.z}},{key:"setStyle",value:function(e,t){for(var i=Object.keys(t),r=0,n=i;r<n.length;r++){var a=n[r];e.point[a]=t[a]}}},{key:"fromDegrees",value:function(e,t){var r=i.defaultStyle;if(t instanceof Array)r.positions=t.map((function(e){if(void 0===e.lon||void 0===e.lat)throw new Error("参数错误");return k.Cartesian3.fromDegrees(e.lon,e.lat,e.height)}));else{if(void 0===t.lon||void 0===t.lat)throw new Error("参数错误");r.positions=k.Cartesian3.fromDegrees(t.lon,t.lat,t.height)}return new i(e,r)}},{key:"fromRadians",value:function(e,t){var r=i.defaultStyle;if(t instanceof Array)r.positions=t.map((function(e){if(void 0===e.lon||void 0===e.lat)throw new Error("参数错误");return k.Cartesian3.fromRadians(e.lon,e.lat,e.height)}));else{if(void 0===t.lon||void 0===t.lat)throw new Error("参数错误");r.positions=k.Cartesian3.fromRadians(r.positions.lon,r.positions.lat,r.positions.height)}return new i(e,r)}},{key:"isCesiumPoint",value:function(e){return!(!M(e)||!e.id||e.id.gvtype!==h["a"].POINT)}}]),i}(w);Object(l["a"])(O,"defaultStyle",{color:k.Color.RED,pixelSize:5,outlineColor:k.Color.WHITE,outlineWidth:3,heightReference:k.HeightReference.CLAMP_TO_GROUND}),Object(l["a"])(O,"editStyle",{color:k.Color.RED,pixelSize:5,outlineColor:k.Color.AQUA,outlineWidth:3,heightReference:k.HeightReference.CLAMP_TO_GROUND}),Object(l["a"])(O,"selectedStyle",{color:k.Color.AQUA,pixelSize:5,outlineColor:k.Color.AQUA,outlineWidth:3});var C=function(e){Object(a["a"])(i,e);var t=g(i);function i(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.defaultStyle;Object(c["a"])(this,i),r=t.call(this,e),r._type="POLYLINE",r.gvtype=h["a"].POLYLINE,r.positions=a.positions||[];var o=Object(n["a"])(r),s=function(){return o.positions};return r.options={gvname:r._name,gvid:r._gvid,gvtype:r._gvtype,polyline:a,properties:a.properties},delete a.properties,r.options.polyline.positions=new k.CallbackProperty(s,!1),r.graphic=void 0,r.nodeGraphic=void 0,r.node=!1,r.create(),r}return Object(d["a"])(i,[{key:"material",get:function(){if(this.graphic)return this.graphic.polyline.material}},{key:"width",get:function(){if(this.graphic)return this.graphic.polyline.width.getValue()}},{key:"properties",get:function(){return!!this.graphic&&this.graphic.properties},set:function(e){if(this.graphic)return this.graphic.properties=e}},{key:"addNode",value:function(e){e instanceof k.Cartesian3&&this.positions.push(e)}},{key:"popNode",value:function(){this.positions.pop()}},{key:"updateNode",value:function(e,t){if(e<0||e>this.positions.length-1)throw new Error("无效的index");if(t instanceof k.Cartesian3===!1)throw new Error("无效的node");this.positions[e]=t}},{key:"dropNode",value:function(e){this.positions.splice(e,1)}},{key:"create",value:function(){this.viewer&&(this.graphic=this.viewer.entities.add(this.options))}},{key:"createNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O.defaultStyle;e.positions=this.positions,e.clampToGround=this.options.polyline.clampToGround,this.nodeGraphic=new O(this.viewer,e),this.node=!0}},{key:"startEdit",value:function(){var e=this;M(this.graphic)&&(this.graphic.polyline.positions=new k.CallbackProperty((function(){return e.positions}),!1),!1===this.node&&this.createNode())}},{key:"stopEdit",value:function(){this.graphic instanceof k.Entity&&(this.graphic.polyline.positions=this.positions),this.removeNode()}},{key:"remove",value:function(){this.viewer&&(this.viewer.entities.remove(this.graphic),this.graphic=void 0,this.removeNode())}},{key:"removeNode",value:function(){this.node&&(this.nodeGraphic.remove(),this.node=!1)}},{key:"setMaterial",value:function(e){this.graphic.polyline.material=e}},{key:"destroy",value:function(){this.remove(),this.viewer=void 0,this.options=void 0,this.positions=void 0,this.nodeGraphic&&this.nodeGraphic.destroy(),this.nodeGraphic=void 0}}],[{key:"fromDegrees",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=t.map((function(e){return k.Cartesian3.fromDegrees(e.lon,e.lat,e.height)}));var n=m(m({positions:t},i.defaultStyle),{},{properties:r}),a=new i(e,n);return a.stopEdit(),a}},{key:"fromRadians",value:function(e,t){t=t.map((function(e){return k.Cartesian3.fromRadians(e.lon,e.lat,e.height)}));var r=m({positions:t},i.defaultStyle),n=new i(e,r);return n}}]),i}(w);Object(l["a"])(C,"defaultStyle",{clampToGround:!0,material:k.Color.fromCssColorString("rgba(247,224,32,1)"),width:3}),Object(l["a"])(C,"selectedStyle",{clampToGround:!0,material:k.Color.AQUA,width:3});var P=function(e){Object(a["a"])(i,e);var t=g(i);function i(e){var a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.defaultStyle;Object(c["a"])(this,i),a=t.call(this,e),a._type="POLYGON",a.gvtype=h["a"].POLYGON,a.positions=o.positions||[],a.nodePositions=Object(r["a"])(a.positions);var s=Object(n["a"])(a);return a.options={gvid:a.gvid,gvtype:a.gvtype,polygon:m({hierarchy:new k.CallbackProperty((function(){return new k.PolygonHierarchy(s.positions)}),!1)},o),properties:o.properties},delete o.properties,a.node=!1,a.graphic=void 0,a.nodeGraphic=void 0,a.outlineGraphic=void 0,a.outline=o.outline,a.create(),a}return Object(d["a"])(i,[{key:"properties",get:function(){return!!this.graphic&&this.graphic.properties},set:function(e){return!!this.graphic&&(this.graphic.properties=e)}},{key:"outlineStyle",get:function(){if(this.outlineGraphic)return this.outlineGraphic.polyline},set:function(e){var t={};if(M(this.outlineGraphic)){var i=this.outlineGraphic.graphic.polyline;t.material=e.outlineColor||i.material,t.width=e.outlineWidth||i.width,this.outlineGraphic.graphic.polyline.material=t.material,this.outlineGraphic.graphic.polyline.width=t.width,this.outlineGraphic.options.polyline.material=t.material,this.outlineGraphic.options.polyline.width=t.width}else this.outline&&this.createOutline(t)}},{key:"material",get:function(){if(this.graphic)return this.graphic.polygon.material.getValue().color}},{key:"outlineColor",get:function(){return this.outlineGraphic?this.outlineGraphic.graphic.polyline.material.getValue().color:i.defaultStyle.outlineColor}},{key:"outlineWidth",get:function(){return this.outlineGraphic?this.outlineGraphic.graphic.polyline.width.getValue():i.defaultStyle.outlineWidth}},{key:"addNode",value:function(e){if(e instanceof k.Cartesian3){this.positions.push(e);var t=this.nodePositions.length;0===t&&(this.nodePositions.push(this.positions[0]),this.nodePositions.push(this.positions[0])),t>=2&&(this.nodePositions[t]=this.nodePositions[t-1],this.nodePositions[t-1]=e)}}},{key:"updateNode",value:function(e,t){if(e<0||e>this.positions.length-1)throw new Error("无效的index");if(t instanceof k.Cartesian3===!1)throw new Error("无效的node");this.positions[e]=t,0===e?(this.nodePositions[0]=t,this.nodePositions[this.nodePositions.length-1]=t):this.nodePositions[e]=t}},{key:"popNode",value:function(){this.positions.pop(),this.nodePositions.splice(this.nodePositions.length-2),this.nodePositions.push(this.positions[0])}},{key:"dropNode",value:function(e){this.positions.splice(e,1),this.nodePositions.splice(e,1),0===e&&(this.nodePositions[this.nodePositions.length-1]=this.nodePositions[0])}},{key:"create",value:function(){this.options.polygon.outline=!1,this.viewer&&(this.graphic=this.viewer.entities.add(this.options),this.outline&&this.createOutline())}},{key:"createNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O.defaultStyle;this.node=!0,e.positions=this.positions,e.clampToGround=this.graphic.polygon.perPositionHeight.getValue(),this.nodeGraphic=new O(this.viewer,e)}},{key:"createOutline",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!1!==this.options.outline?(e.width=this.options.polygon.outlineWidth||C.defaultStyle.width,e.material=this.options.polygon.outlineColor||C.defaultStyle.material,e.clampToGround=!this.graphic.polygon.perPositionHeight.getValue(),e.positions=this.nodePositions,this.outlineGraphic=new C(this.viewer,e),this.outline=!0):b.log("如果您想创建多边形边线,请在options中设置outline为true")}},{key:"startEdit",value:function(){var e=this.positions;this.graphic instanceof k.Entity&&(this.graphic.polygon.hierarchy=new k.CallbackProperty((function(){return new k.PolygonHierarchy(e)})),this.outline?(this.outlineGraphic.startEdit(),this.nodeGraphic=this.outlineGraphic.nodeGraphic,this.node=!0):this.createNode())}},{key:"stopEdit",value:function(){this.graphic instanceof k.Entity&&(this.graphic.polygon.hierarchy=new k.PolygonHierarchy(this.positions)),this.removeNode(),this.nodeGraphic&&this.nodeGraphic.stopEdit(),this.outlineGraphic&&this.outlineGraphic.stopEdit()}},{key:"remove",value:function(){this.viewer&&(this.viewer.entities.remove(this.graphic),this.graphic=void 0,this.removeNode(),this.removeOutline())}},{key:"removeOutline",value:function(){this.outline&&(this.outlineGraphic.remove(),this.outline=!1,this.outlineGraphic=void 0)}},{key:"removeNode",value:function(){this.node&&(this.nodeGraphic.remove(),this.node=!1)}},{key:"destroy",value:function(){this.remove(),this.viewer=void 0,this.positions=void 0,this.options=void 0,this.nodeGraphic&&this.nodeGraphic.destroy(),this.outlineGraphic&&this.outlineGraphic.destroy(),this.outlineGraphic=void 0,this.nodeGraphic=void 0}}],[{key:"fromDegrees",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=t.map((function(e){return k.Cartesian3.fromDegrees(e.lon,e.lat,e.height)}));var n=i.defaultStyle;n.positions=t,n.properties=r;var a=new i(e,n);return a.stopEdit(),a}},{key:"fromRadians",value:function(e,t){t=t.map((function(e){return k.Cartesian3.fromRadians(e.lon,e.lat,e.height)}));var r=i.defaultStyle;return r.positions=t,new i(e,r)}}]),i}(w);Object(l["a"])(P,"defaultStyle",{material:new k.Color.fromCssColorString("rgba(247,224,32,0.5)"),outline:!0,outlineColor:new k.Color.fromCssColorString("rgba(255,247,145,1)"),outlineWidth:2,perPositionHeight:!1}),Object(l["a"])(P,"selectedStyle",{material:new k.ColorMaterialProperty(k.Color.AQUA.withAlpha(.4)),outlineColor:k.Color.AQUA.withAlpha(.4)});var A=function(e){Object(a["a"])(i,e);var t=g(i);function i(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.defaultStyle;return Object(c["a"])(this,i),r=t.call(this,e),r._type="LABEL",r._gvtype=h["a"].LABEL,r.position=n.position,r.options={gvid:r._gvid,gvtype:r._gvtype,position:r.position,label:n},r.graphic=void 0,r.create(),r}return Object(d["a"])(i,[{key:"color",get:function(){if(this.graphic)return this.graphic.label.fillColor.getValue()},set:function(e){this.graphic&&(this.graphic.label.fillColor=e)}},{key:"font",get:function(){if(this.graphic)return this.graphic.label.font.getValue()}},{key:"create",value:function(){this.graphic=this.viewer.entities.add(this.options)}},{key:"startEdit",value:function(){var e=this;this.graphic&&(this.graphic.label.position=new k.CallbackProperty((function(){return e.position}),!1))}},{key:"stopEdit",value:function(){this.graphic&&(this.graphic.label.position=this.position)}},{key:"remove",value:function(){this.viewer&&this.viewer.entities.remove(this.graphic),this.graphic=void 0}},{key:"updateText",value:function(e){this.graphic&&(this.graphic.label.text=e,this.gvname=e)}},{key:"destroy",value:function(){this.remove(),this.viewer=void 0,this.options=void 0,this.positions=void 0}}]),i}(w);Object(l["a"])(A,"defaultStyle",{color:k.Color.WHITE,font:"28px sans-serif",showBackground:!0});var L=function(e){Object(a["a"])(i,e);var t=g(i);function i(e,r){var n;return Object(c["a"])(this,i),n=t.call(this,e),n._type="MODEL",n._gvtype=h["a"].MODEL,n.position=r.position,n.options={gvid:n._gvid,gvtype:n._gvtype,position:n.position,model:r},n.create(),n}return Object(d["a"])(i,[{key:"create",value:function(){this.graphic=this.viewer.entities.add(this.options)}},{key:"startEdit",value:function(){var e=this;this.graphic&&(this.graphic.label.position=new k.CallbackProperty((function(){return e.position}),!1))}},{key:"stopEdit",value:function(){this.graphic&&(this.graphic.label.position=this.position)}},{key:"remove",value:function(){this.viewer&&(this.viewer.entities.remove(this.graphic),this.graphic=void 0)}},{key:"destroy",value:function(){this.remove(),this.options=void 0,this.position=void 0}},{key:"uri",set:function(e){this.graphic&&(this.graphic.model.uri=e)}},{key:"color",set:function(e){this.graphic&&(this.graphic.model.color=e)}},{key:"mode",set:function(e){this.graphic&&(this.graphic.model.colorBlendMode=e)}},{key:"mixed",set:function(e){this.graphic&&(this.graphic.model.colorBlendAmount=e)}}]),i}(w);Object(l["a"])(L,"defaultStyle",{colorBlendMode:k.ColorBlendMode.HIGHLIGHT,color:k.Color.WHITE,colorBlendAmount:.5,minimumPixelSize:64})},cf00:function(e,t,i){},dc63:function(e,t,i){},f155:function(e,t,i){},f9a9:function(e,t,i){}});